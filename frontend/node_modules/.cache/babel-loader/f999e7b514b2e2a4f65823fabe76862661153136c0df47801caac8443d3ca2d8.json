{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cesar\\\\OneDrive\\\\Documentos\\\\GitHub\\\\muebleria-app\\\\frontend\\\\src\\\\pages\\\\CarritoPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/CarritoPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../components/Auth/Navbar';\nimport './CarritoPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CarritoPage() {\n  _s();\n  const [carrito, setCarrito] = useState(null);\n\n  // ‚Äî‚Äî‚Äî Direcciones\n  const [direcciones, setDirecciones] = useState([]);\n  const [direccion, setDireccion] = useState({\n    nombre: '',\n    calle: '',\n    ciudad: '',\n    estado: '',\n    cp: '',\n    telefono: '',\n    referencia: ''\n  });\n  const [direccionId, setDireccionId] = useState(null);\n  const [direccionGuardada, setDireccionGuardada] = useState(false);\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\n\n  // ‚Äî‚Äî‚Äî M√©todos de pago\n  const [metodos, setMetodos] = useState([]);\n  const [selectedMetodoId, setSelectedMetodoId] = useState(null);\n  const [nuevoMetodo, setNuevoMetodo] = useState(false);\n  const [newTipo, setNewTipo] = useState('tarjeta');\n  const [detallesPago, setDetallesPago] = useState({\n    numero: '',\n    expiracion: '',\n    cvv: '',\n    email: ''\n  });\n  const [pagoGuardado, setPagoGuardado] = useState(false);\n  const [mensajePago, setMensajePago] = useState('');\n\n  // ‚Äî‚Äî‚Äî Checkout\n  const [mensajeFinal, setMensajeFinal] = useState('');\n  const token = localStorage.getItem('token');\n  const API = 'http://localhost:4000/api';\n  useEffect(() => {\n    // 1) Cargar carrito\n    fetch(`${API}/carrito`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setCarrito).catch(console.error);\n\n    // 2) Cargar direcciones\n    fetch(`${API}/direcciones`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(dirs => {\n      setDirecciones(dirs || []);\n      if (dirs.length) {\n        const d = dirs[0];\n        setDireccionId(d.id);\n        setDireccion({\n          nombre: d.nombre_recibe,\n          calle: d.calle,\n          ciudad: d.ciudad,\n          estado: d.estado,\n          cp: d.cp,\n          telefono: d.telefono,\n          referencia: d.referencia || ''\n        });\n        setDireccionGuardada(true);\n        setMensajeDireccion('üì¶ Direcci√≥n cargada del servidor.');\n      }\n    }).catch(console.error);\n\n    // 3) Cargar m√©todos de pago\n    fetch(`${API}/metodos`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(mps => {\n      setMetodos(mps || []);\n      if (mps.length) {\n        const m = mps[0];\n        setSelectedMetodoId(m.id);\n        setNuevoMetodo(false);\n        // prefill solo para mostrar en label\n        if (m.tipo === 'transferencia') {\n          setDetallesPago({\n            numero: '',\n            expiracion: '',\n            cvv: '',\n            email: m.titular\n          });\n        } else {\n          setDetallesPago({\n            numero: '',\n            expiracion: '',\n            cvv: '',\n            email: ''\n          });\n        }\n        setPagoGuardado(true);\n        setMensajePago('üí≥ M√©todo de pago cargado del servidor.');\n      } else {\n        setNuevoMetodo(true);\n      }\n    }).catch(console.error);\n  }, []);\n  if (!carrito) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando carrito\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 24\n  }, this);\n\n  // ‚Äî Actualizar / eliminar √≠tem\n  const cambiarCantidad = (id, qty) => {\n    fetch(`${API}/carrito/detalle/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        cantidad: qty\n      })\n    }).then(() => fetch(`${API}/carrito`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setCarrito)).catch(console.error);\n  };\n  const eliminarItem = id => cambiarCantidad(id, 0);\n\n  // ‚Äî Total\n  const total = carrito.detalles.reduce((sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0);\n\n  // ‚Äî Guardar direcci√≥n\n  const guardarDireccion = async () => {\n    if (!direccion.nombre || !direccion.calle || !direccion.ciudad || !direccion.cp) {\n      return alert('Por favor completa nombre, calle, ciudad y c√≥digo postal.');\n    }\n    try {\n      const res = await fetch(`${API}/direcciones`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          nombre_recibe: direccion.nombre,\n          calle: direccion.calle,\n          ciudad: direccion.ciudad,\n          estado: direccion.estado,\n          cp: direccion.cp,\n          telefono: direccion.telefono,\n          referencia: direccion.referencia\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg || 'Error guardando direcci√≥n');\n      setDireccionId(body.id);\n      setDireccionGuardada(true);\n      setMensajeDireccion('üì¶ Direcci√≥n guardada en el servidor.');\n    } catch (e) {\n      alert('‚ùå ' + e.message);\n    }\n  };\n\n  // ‚Äî Guardar / actualizar m√©todo de pago\n  const guardarMetodoPago = async () => {\n    // validaciones\n    if (nuevoMetodo) {\n      if (newTipo === 'tarjeta') {\n        const {\n          numero,\n          expiracion,\n          cvv\n        } = detallesPago;\n        if (!numero || !expiracion || !cvv) {\n          return alert('Completa todos los datos de la tarjeta.');\n        }\n      }\n      if (newTipo === 'transferencia' && !detallesPago.email) {\n        return alert('Introduce tu correo de PayPal.');\n      }\n    } else if (!selectedMetodoId) {\n      return alert('Selecciona o crea un m√©todo de pago.');\n    }\n    try {\n      let url = `${API}/metodos`;\n      let method = 'POST';\n      let payload = {};\n      if (nuevoMetodo) {\n        // CREAR\n        payload.tipo = newTipo;\n        if (newTipo === 'tarjeta') {\n          payload.token_last4 = detallesPago.numero.slice(-4);\n          payload.titular = detallesPago.numero;\n        } else if (newTipo === 'transferencia') {\n          payload.titular = detallesPago.email;\n        }\n      } else {\n        // ACTUALIZAR\n        url = `${API}/metodos/${selectedMetodoId}`;\n        method = 'PUT';\n        const existing = metodos.find(m => m.id === selectedMetodoId);\n        payload.tipo = existing.tipo;\n        if (existing.tipo === 'transferencia') {\n          payload.titular = existing.titular;\n        }\n      }\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg || 'Error guardando m√©todo');\n\n      // refrescar lista\n      const refreshed = await fetch(`${API}/metodos`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json());\n      setMetodos(refreshed);\n      setSelectedMetodoId(body.id);\n      setNuevoMetodo(false);\n      setPagoGuardado(true);\n      setMensajePago('üí≥ M√©todo de pago guardado en el servidor.');\n    } catch (e) {\n      alert('‚ùå ' + e.message);\n    }\n  };\n\n  // ‚Äî Borrar m√©todo\n  const borrarMetodo = async () => {\n    if (!selectedMetodoId) return;\n    try {\n      const res = await fetch(`${API}/metodos/${selectedMetodoId}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error('Error borrando m√©todo');\n      const remaining = metodos.filter(m => m.id !== selectedMetodoId);\n      setMetodos(remaining);\n      setSelectedMetodoId(null);\n      setNuevoMetodo(true);\n      setPagoGuardado(false);\n      setMensajePago('');\n    } catch (e) {\n      alert('‚ùå ' + e.message);\n    }\n  };\n\n  // ‚Äî Checkout\n  const handleCheckout = async () => {\n    if (!direccionGuardada || !pagoGuardado) {\n      return alert('Guarda direcci√≥n y m√©todo de pago antes de continuar.');\n    }\n    try {\n      const res = await fetch(`${API}/carrito/checkout`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          direccionId,\n          metodoId: selectedMetodoId\n        })\n      });\n      if (!res.ok) throw new Error('Error en checkout');\n      setMensajeFinal('‚úÖ Tu compra se ha procesado correctamente.');\n    } catch (e) {\n      alert('‚ùå ' + e.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carrito-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 Tu Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), carrito.detalles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Tu carrito est\\xE1 vac\\xEDo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carrito-items\",\n          children: carrito.detalles.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"carrito-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:4000${d.producto.imagen_url}`,\n              alt: d.producto.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: d.producto.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"$\", d.producto.precio_unitario.toLocaleString(), \" MXN\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cantidad-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Cantidad:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: d.cantidad,\n                  onChange: e => cambiarCantidad(d.id, +e.target.value || 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"eliminar\",\n                onClick: () => eliminarItem(d.id),\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 21\n            }, this)]\n          }, d.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"direccion-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCE6 Direcci\\xF3n de env\\xEDo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Nombre completo\",\n            value: direccion.nombre,\n            onChange: e => setDireccion({\n              ...direccion,\n              nombre: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Calle\",\n            value: direccion.calle,\n            onChange: e => setDireccion({\n              ...direccion,\n              calle: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ciudad\",\n            value: direccion.ciudad,\n            onChange: e => setDireccion({\n              ...direccion,\n              ciudad: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Estado\",\n            value: direccion.estado,\n            onChange: e => setDireccion({\n              ...direccion,\n              estado: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"C\\xF3digo postal\",\n            value: direccion.cp,\n            onChange: e => setDireccion({\n              ...direccion,\n              cp: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            placeholder: \"Tel\\xE9fono\",\n            value: direccion.telefono,\n            onChange: e => setDireccion({\n              ...direccion,\n              telefono: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Referencia (opcional)\",\n            value: direccion.referencia,\n            onChange: e => setDireccion({\n              ...direccion,\n              referencia: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guardar-btn\",\n            onClick: guardarDireccion,\n            children: \"Guardar direcci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 17\n          }, this), mensajeDireccion && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeDireccion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metodo-pago-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCB3 M\\xE9todo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 17\n          }, this), !nuevoMetodo && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedMetodoId !== null && selectedMetodoId !== void 0 ? selectedMetodoId : '',\n              onChange: e => {\n                const v = e.target.value;\n                if (v === 'nuevo') {\n                  setNuevoMetodo(true);\n                  setSelectedMetodoId(null);\n                  setPagoGuardado(false);\n                  setMensajePago('');\n                } else {\n                  const id = parseInt(v, 10);\n                  setSelectedMetodoId(id);\n                  setNuevoMetodo(false);\n                  setPagoGuardado(true);\n                  setMensajePago('üí≥ M√©todo de pago cargado del servidor.');\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecciona un m\\xE9todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 23\n              }, this), metodos.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: m.id,\n                children: m.tipo === 'tarjeta' ? `Tarjeta ‚Ä¢‚Ä¢‚Ä¢‚Ä¢${m.token_last4}` : m.tipo === 'transferencia' ? `PayPal (${m.titular})` : 'Efectivo (Pago al recibir)'\n              }, m.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 25\n              }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"nuevo\",\n                children: \"+ Agregar nuevo m\\xE9todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 21\n            }, this), selectedMetodoId && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"eliminar\",\n              onClick: borrarMetodo,\n              children: \"Eliminar este m\\xE9todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true), nuevoMetodo && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: newTipo,\n              onChange: e => setNewTipo(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"tarjeta\",\n                children: \"Tarjeta de Cr\\xE9dito/D\\xE9bito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"transferencia\",\n                children: \"PayPal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"efectivo\",\n                children: \"Efectivo (Pago al recibir)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 21\n            }, this), newTipo === 'tarjeta' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"N\\xFAmero de tarjeta (16 d\\xEDgitos)\",\n                value: detallesPago.numero,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  numero: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"MM/AA\",\n                value: detallesPago.expiracion,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  expiracion: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"CVV\",\n                value: detallesPago.cvv,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  cvv: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true), newTipo === 'transferencia' && /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Correo de PayPal\",\n              value: detallesPago.email,\n              onChange: e => setDetallesPago({\n                ...detallesPago,\n                email: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 23\n            }, this), newTipo === 'efectivo' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Se pagar\\xE1 al recibir.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"guardar-btn\",\n              onClick: guardarMetodoPago,\n              children: \"Guardar m\\xE9todo de pago\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true), mensajePago && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajePago\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resumen-carrito\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Total: $\", total.toLocaleString(), \" MXN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pago-btn\",\n            onClick: handleCheckout,\n            children: \"Proceder al pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 17\n          }, this), mensajeFinal && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeFinal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CarritoPage, \"VLENUStMhgl2VtxNtSuTrSa4Oeo=\");\n_c = CarritoPage;\nvar _c;\n$RefreshReg$(_c, \"CarritoPage\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","CarritoPage","_s","carrito","setCarrito","direcciones","setDirecciones","direccion","setDireccion","nombre","calle","ciudad","estado","cp","telefono","referencia","direccionId","setDireccionId","direccionGuardada","setDireccionGuardada","mensajeDireccion","setMensajeDireccion","metodos","setMetodos","selectedMetodoId","setSelectedMetodoId","nuevoMetodo","setNuevoMetodo","newTipo","setNewTipo","detallesPago","setDetallesPago","numero","expiracion","cvv","email","pagoGuardado","setPagoGuardado","mensajePago","setMensajePago","mensajeFinal","setMensajeFinal","token","localStorage","getItem","API","fetch","headers","Authorization","then","r","json","catch","console","error","dirs","length","d","id","nombre_recibe","mps","m","tipo","titular","children","fileName","_jsxFileName","lineNumber","columnNumber","cambiarCantidad","qty","method","body","JSON","stringify","cantidad","eliminarItem","total","detalles","reduce","sum","producto","precio_unitario","guardarDireccion","alert","res","ok","Error","msg","e","message","guardarMetodoPago","url","payload","token_last4","slice","existing","find","refreshed","borrarMetodo","remaining","filter","handleCheckout","metodoId","className","map","src","imagen_url","alt","toLocaleString","type","min","value","onChange","target","onClick","placeholder","v","parseInt","_c","$RefreshReg$"],"sources":["C:/Users/cesar/OneDrive/Documentos/GitHub/muebleria-app/frontend/src/pages/CarritoPage.jsx"],"sourcesContent":["// src/pages/CarritoPage.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport Navbar from '../components/Auth/Navbar';\r\nimport './CarritoPage.css';\r\n\r\nexport default function CarritoPage() {\r\n  const [carrito, setCarrito]               = useState(null);\r\n\r\n  // ‚Äî‚Äî‚Äî Direcciones\r\n  const [direcciones, setDirecciones]       = useState([]);\r\n  const [direccion, setDireccion]           = useState({\r\n    nombre: '', calle: '', ciudad: '', estado: '', cp: '', telefono: '', referencia: ''\r\n  });\r\n  const [direccionId, setDireccionId]       = useState(null);\r\n  const [direccionGuardada, setDireccionGuardada] = useState(false);\r\n  const [mensajeDireccion, setMensajeDireccion]   = useState('');\r\n\r\n  // ‚Äî‚Äî‚Äî M√©todos de pago\r\n  const [metodos, setMetodos]               = useState([]);\r\n  const [selectedMetodoId, setSelectedMetodoId] = useState(null);\r\n  const [nuevoMetodo, setNuevoMetodo]       = useState(false);\r\n  const [newTipo, setNewTipo]               = useState('tarjeta');\r\n  const [detallesPago, setDetallesPago]     = useState({\r\n    numero: '', expiracion: '', cvv: '', email: ''\r\n  });\r\n  const [pagoGuardado, setPagoGuardado]     = useState(false);\r\n  const [mensajePago, setMensajePago]       = useState('');\r\n\r\n  // ‚Äî‚Äî‚Äî Checkout\r\n  const [mensajeFinal, setMensajeFinal]     = useState('');\r\n\r\n  const token = localStorage.getItem('token');\r\n  const API   = 'http://localhost:4000/api';\r\n\r\n  useEffect(() => {\r\n    // 1) Cargar carrito\r\n    fetch(`${API}/carrito`, { headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json()).then(setCarrito).catch(console.error);\r\n\r\n    // 2) Cargar direcciones\r\n    fetch(`${API}/direcciones`,{ headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json())\r\n      .then(dirs => {\r\n        setDirecciones(dirs || []);\r\n        if (dirs.length) {\r\n          const d = dirs[0];\r\n          setDireccionId(d.id);\r\n          setDireccion({\r\n            nombre:    d.nombre_recibe,\r\n            calle:     d.calle,\r\n            ciudad:    d.ciudad,\r\n            estado:    d.estado,\r\n            cp:        d.cp,\r\n            telefono:  d.telefono,\r\n            referencia:d.referencia || ''\r\n          });\r\n          setDireccionGuardada(true);\r\n          setMensajeDireccion('üì¶ Direcci√≥n cargada del servidor.');\r\n        }\r\n      })\r\n      .catch(console.error);\r\n\r\n    // 3) Cargar m√©todos de pago\r\n    fetch(`${API}/metodos`,{ headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json())\r\n      .then(mps => {\r\n        setMetodos(mps || []);\r\n        if (mps.length) {\r\n          const m = mps[0];\r\n          setSelectedMetodoId(m.id);\r\n          setNuevoMetodo(false);\r\n          // prefill solo para mostrar en label\r\n          if (m.tipo === 'transferencia') {\r\n            setDetallesPago({ numero:'', expiracion:'', cvv:'', email:m.titular });\r\n          } else {\r\n            setDetallesPago({ numero:'', expiracion:'', cvv:'', email:'' });\r\n          }\r\n          setPagoGuardado(true);\r\n          setMensajePago('üí≥ M√©todo de pago cargado del servidor.');\r\n        } else {\r\n          setNuevoMetodo(true);\r\n        }\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  if (!carrito) return <p>Cargando carrito‚Ä¶</p>;\r\n\r\n  // ‚Äî Actualizar / eliminar √≠tem\r\n  const cambiarCantidad = (id, qty) => {\r\n    fetch(`${API}/carrito/detalle/${id}`, {\r\n      method:'PUT',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        Authorization:`Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({ cantidad: qty })\r\n    })\r\n    .then(()=> fetch(`${API}/carrito`,{ headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json()).then(setCarrito))\r\n    .catch(console.error);\r\n  };\r\n  const eliminarItem = id => cambiarCantidad(id, 0);\r\n\r\n  // ‚Äî Total\r\n  const total = carrito.detalles.reduce(\r\n    (sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0\r\n  );\r\n\r\n  // ‚Äî Guardar direcci√≥n\r\n  const guardarDireccion = async () => {\r\n    if (!direccion.nombre || !direccion.calle || !direccion.ciudad || !direccion.cp) {\r\n      return alert('Por favor completa nombre, calle, ciudad y c√≥digo postal.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/direcciones`, {\r\n        method:'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          nombre_recibe: direccion.nombre,\r\n          calle:         direccion.calle,\r\n          ciudad:        direccion.ciudad,\r\n          estado:        direccion.estado,\r\n          cp:            direccion.cp,\r\n          telefono:      direccion.telefono,\r\n          referencia:    direccion.referencia\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg || 'Error guardando direcci√≥n');\r\n      setDireccionId(body.id);\r\n      setDireccionGuardada(true);\r\n      setMensajeDireccion('üì¶ Direcci√≥n guardada en el servidor.');\r\n    } catch(e) {\r\n      alert('‚ùå ' + e.message);\r\n    }\r\n  };\r\n\r\n  // ‚Äî Guardar / actualizar m√©todo de pago\r\n  const guardarMetodoPago = async () => {\r\n    // validaciones\r\n    if (nuevoMetodo) {\r\n      if (newTipo === 'tarjeta') {\r\n        const { numero, expiracion, cvv } = detallesPago;\r\n        if (!numero || !expiracion || !cvv) {\r\n          return alert('Completa todos los datos de la tarjeta.');\r\n        }\r\n      }\r\n      if (newTipo === 'transferencia' && !detallesPago.email) {\r\n        return alert('Introduce tu correo de PayPal.');\r\n      }\r\n    } else if (!selectedMetodoId) {\r\n      return alert('Selecciona o crea un m√©todo de pago.');\r\n    }\r\n\r\n    try {\r\n      let url    = `${API}/metodos`;\r\n      let method = 'POST';\r\n      let payload = {};\r\n\r\n      if (nuevoMetodo) {\r\n        // CREAR\r\n        payload.tipo = newTipo;\r\n        if (newTipo === 'tarjeta') {\r\n          payload.token_last4 = detallesPago.numero.slice(-4);\r\n          payload.titular     = detallesPago.numero;\r\n        } else if (newTipo === 'transferencia') {\r\n          payload.titular = detallesPago.email;\r\n        }\r\n      } else {\r\n        // ACTUALIZAR\r\n        url = `${API}/metodos/${selectedMetodoId}`;\r\n        method = 'PUT';\r\n        const existing = metodos.find(m => m.id === selectedMetodoId);\r\n        payload.tipo    = existing.tipo;\r\n        if (existing.tipo === 'transferencia') {\r\n          payload.titular = existing.titular;\r\n        }\r\n      }\r\n\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg || 'Error guardando m√©todo');\r\n\r\n      // refrescar lista\r\n      const refreshed = await fetch(`${API}/metodos`,{\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      }).then(r=>r.json());\r\n      setMetodos(refreshed);\r\n      setSelectedMetodoId(body.id);\r\n      setNuevoMetodo(false);\r\n      setPagoGuardado(true);\r\n      setMensajePago('üí≥ M√©todo de pago guardado en el servidor.');\r\n    } catch(e) {\r\n      alert('‚ùå ' + e.message);\r\n    }\r\n  };\r\n\r\n  // ‚Äî Borrar m√©todo\r\n  const borrarMetodo = async () => {\r\n    if (!selectedMetodoId) return;\r\n    try {\r\n      const res = await fetch(`${API}/metodos/${selectedMetodoId}`, {\r\n        method:'DELETE',\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      });\r\n      if (!res.ok) throw new Error('Error borrando m√©todo');\r\n      const remaining = metodos.filter(m => m.id !== selectedMetodoId);\r\n      setMetodos(remaining);\r\n      setSelectedMetodoId(null);\r\n      setNuevoMetodo(true);\r\n      setPagoGuardado(false);\r\n      setMensajePago('');\r\n    } catch(e) {\r\n      alert('‚ùå ' + e.message);\r\n    }\r\n  };\r\n\r\n  // ‚Äî Checkout\r\n  const handleCheckout = async () => {\r\n    if (!direccionGuardada || !pagoGuardado) {\r\n      return alert('Guarda direcci√≥n y m√©todo de pago antes de continuar.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/carrito/checkout`, {\r\n        method:'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          direccionId,\r\n          metodoId: selectedMetodoId\r\n        })\r\n      });\r\n      if (!res.ok) throw new Error('Error en checkout');\r\n      setMensajeFinal('‚úÖ Tu compra se ha procesado correctamente.');\r\n    } catch(e) {\r\n      alert('‚ùå ' + e.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"carrito-container\">\r\n        <h2>üõí Tu Carrito</h2>\r\n\r\n        {carrito.detalles.length === 0\r\n          ? <p>Tu carrito est√° vac√≠o.</p>\r\n          : <>\r\n              {/* ‚Äî Items ‚Äî */}\r\n              <div className=\"carrito-items\">\r\n                {carrito.detalles.map(d => (\r\n                  <div key={d.id} className=\"carrito-item\">\r\n                    <img\r\n                      src={`http://localhost:4000${d.producto.imagen_url}`}\r\n                      alt={d.producto.nombre}\r\n                    />\r\n                    <div className=\"item-info\">\r\n                      <h4>{d.producto.nombre}</h4>\r\n                      <p>${d.producto.precio_unitario.toLocaleString()} MXN</p>\r\n                      <div className=\"cantidad-control\">\r\n                        <label>Cantidad:</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          value={d.cantidad}\r\n                          onChange={e => cambiarCantidad(d.id, +e.target.value || 1)}\r\n                        />\r\n                      </div>\r\n                      <button className=\"eliminar\" onClick={() => eliminarItem(d.id)}>\r\n                        Eliminar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* ‚Äî Direcci√≥n ‚Äî */}\r\n              <div className=\"direccion-section\">\r\n                <h3>üì¶ Direcci√≥n de env√≠o</h3>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Nombre completo\"\r\n                  value={direccion.nombre}\r\n                  onChange={e=>setDireccion({...direccion,nombre:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Calle\"\r\n                  value={direccion.calle}\r\n                  onChange={e=>setDireccion({...direccion,calle:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Ciudad\"\r\n                  value={direccion.ciudad}\r\n                  onChange={e=>setDireccion({...direccion,ciudad:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Estado\"\r\n                  value={direccion.estado}\r\n                  onChange={e=>setDireccion({...direccion,estado:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"C√≥digo postal\"\r\n                  value={direccion.cp}\r\n                  onChange={e=>setDireccion({...direccion,cp:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"tel\"\r\n                  placeholder=\"Tel√©fono\"\r\n                  value={direccion.telefono}\r\n                  onChange={e=>setDireccion({...direccion,telefono:e.target.value})}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Referencia (opcional)\"\r\n                  value={direccion.referencia}\r\n                  onChange={e=>setDireccion({...direccion,referencia:e.target.value})}\r\n                />\r\n                <button className=\"guardar-btn\" onClick={guardarDireccion}>\r\n                  Guardar direcci√≥n\r\n                </button>\r\n                {mensajeDireccion && <p className=\"mensaje-confirmacion\">{mensajeDireccion}</p>}\r\n              </div>\r\n\r\n              {/* ‚Äî M√©todo de pago ‚Äî */}\r\n              <div className=\"metodo-pago-section\">\r\n                <h3>üí≥ M√©todo de pago</h3>\r\n\r\n                {!nuevoMetodo && (\r\n                  <>\r\n                    <select\r\n                      value={selectedMetodoId ?? ''}\r\n                      onChange={e => {\r\n                        const v = e.target.value;\r\n                        if (v === 'nuevo') {\r\n                          setNuevoMetodo(true);\r\n                          setSelectedMetodoId(null);\r\n                          setPagoGuardado(false);\r\n                          setMensajePago('');\r\n                        } else {\r\n                          const id = parseInt(v, 10);\r\n                          setSelectedMetodoId(id);\r\n                          setNuevoMetodo(false);\r\n                          setPagoGuardado(true);\r\n                          setMensajePago('üí≥ M√©todo de pago cargado del servidor.');\r\n                        }\r\n                      }}\r\n                    >\r\n                      <option value=\"\">Selecciona un m√©todo</option>\r\n                      {metodos.map(m => (\r\n                        <option key={m.id} value={m.id}>\r\n                          {m.tipo === 'tarjeta'\r\n                            ? `Tarjeta ‚Ä¢‚Ä¢‚Ä¢‚Ä¢${m.token_last4}`\r\n                            : m.tipo === 'transferencia'\r\n                              ? `PayPal (${m.titular})`\r\n                              : 'Efectivo (Pago al recibir)'\r\n                          }\r\n                        </option>\r\n                      ))}\r\n                      <option value=\"nuevo\">+ Agregar nuevo m√©todo</option>\r\n                    </select>\r\n                    {selectedMetodoId && (\r\n                      <button className=\"eliminar\" onClick={borrarMetodo}>\r\n                        Eliminar este m√©todo\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {nuevoMetodo && (\r\n                  <>\r\n                    <select\r\n                      value={newTipo}\r\n                      onChange={e => setNewTipo(e.target.value)}\r\n                    >\r\n                      <option value=\"tarjeta\">Tarjeta de Cr√©dito/D√©bito</option>\r\n                      <option value=\"transferencia\">PayPal</option>\r\n                      <option value=\"efectivo\">Efectivo (Pago al recibir)</option>\r\n                    </select>\r\n\r\n                    {newTipo === 'tarjeta' && (\r\n                      <>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"N√∫mero de tarjeta (16 d√≠gitos)\"\r\n                          value={detallesPago.numero}\r\n                          onChange={e => setDetallesPago({...detallesPago,numero:e.target.value})}\r\n                        />\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"MM/AA\"\r\n                          value={detallesPago.expiracion}\r\n                          onChange={e => setDetallesPago({...detallesPago,expiracion:e.target.value})}\r\n                        />\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"CVV\"\r\n                          value={detallesPago.cvv}\r\n                          onChange={e => setDetallesPago({...detallesPago,cvv:e.target.value})}\r\n                        />\r\n                      </>\r\n                    )}\r\n                    {newTipo === 'transferencia' && (\r\n                      <input\r\n                        type=\"email\"\r\n                        placeholder=\"Correo de PayPal\"\r\n                        value={detallesPago.email}\r\n                        onChange={e => setDetallesPago({...detallesPago,email:e.target.value})}\r\n                      />\r\n                    )}\r\n                    {newTipo === 'efectivo' && (\r\n                      <p>Se pagar√° al recibir.</p>\r\n                    )}\r\n\r\n                    <button className=\"guardar-btn\" onClick={guardarMetodoPago}>\r\n                      Guardar m√©todo de pago\r\n                    </button>\r\n                  </>\r\n                )}\r\n\r\n                {mensajePago && <p className=\"mensaje-confirmacion\">{mensajePago}</p>}\r\n              </div>\r\n\r\n              {/* ‚Äî Resumen y checkout ‚Äî */}\r\n              <div className=\"resumen-carrito\">\r\n                <h3>Total: ${total.toLocaleString()} MXN</h3>\r\n                <button className=\"pago-btn\" onClick={handleCheckout}>\r\n                  Proceder al pago\r\n                </button>\r\n                {mensajeFinal && <p className=\"mensaje-confirmacion\">{mensajeFinal}</p>}\r\n              </div>\r\n            </>\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}