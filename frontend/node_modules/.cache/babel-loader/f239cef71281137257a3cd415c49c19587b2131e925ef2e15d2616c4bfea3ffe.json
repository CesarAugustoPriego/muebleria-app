{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cesar\\\\OneDrive\\\\Documentos\\\\GitHub\\\\muebleria-app\\\\frontend\\\\src\\\\pages\\\\CarritoPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../components/Auth/Navbar';\nimport './CarritoPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CarritoPage() {\n  _s();\n  const token = localStorage.getItem('token');\n  const API = 'http://localhost:4000/api';\n\n  // — Carrito\n  const [carrito, setCarrito] = useState(null);\n\n  // — Direcciones\n  const [direcciones, setDirecciones] = useState([]);\n  const [selectedDireccionId, setSelectedDireccionId] = useState(null);\n  const [nuevaDireccion, setNuevaDireccion] = useState(false);\n  const [direccion, setDireccion] = useState({\n    nombre: '',\n    calle: '',\n    ciudad: '',\n    estado: '',\n    cp: '',\n    telefono: '',\n    referencia: ''\n  });\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\n\n  // — Métodos de pago\n  const [metodos, setMetodos] = useState([]);\n  const [selectedMetodoId, setSelectedMetodoId] = useState(null);\n  const [nuevoMetodo, setNuevoMetodo] = useState(false);\n  const [tipoNuevoMetodo, setTipoNuevoMetodo] = useState('tarjeta');\n  const [detallesPago, setDetallesPago] = useState({\n    numero: '',\n    expiracion: '',\n    cvv: '',\n    email: ''\n  });\n  const [mensajePago, setMensajePago] = useState('');\n\n  // — Checkout final\n  const [mensajeFinal, setMensajeFinal] = useState('');\n  useEffect(() => {\n    // 1) cargar carrito\n    fetch(`${API}/carrito`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setCarrito).catch(console.error);\n\n    // 2) cargar direcciones\n    fetch(`${API}/direcciones`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(dirs => {\n      setDirecciones(dirs || []);\n      if (dirs.length) {\n        const d = dirs[0];\n        setSelectedDireccionId(d.id);\n        setDireccion({\n          nombre: d.nombre_recibe,\n          calle: d.calle,\n          ciudad: d.ciudad,\n          estado: d.estado,\n          cp: d.cp,\n          telefono: d.telefono,\n          referencia: d.referencia || ''\n        });\n      } else {\n        setNuevaDireccion(true);\n      }\n    }).catch(console.error);\n\n    // 3) cargar métodos de pago\n    fetch(`${API}/metodos`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(mps => {\n      setMetodos(mps || []);\n      if (mps.length) {\n        setSelectedMetodoId(mps[0].id);\n      } else {\n        setNuevoMetodo(true);\n      }\n    }).catch(console.error);\n  }, [API, token]);\n  if (!carrito) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"loading\",\n    children: \"Cargando carrito\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 24\n  }, this);\n  const total = carrito.detalles.reduce((sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0);\n  const recargarCarrito = () => fetch(`${API}/carrito`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  }).then(r => r.json()).then(setCarrito).catch(console.error);\n  const cambiarCantidad = (id, qty) => {\n    fetch(`${API}/carrito/detalle/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        cantidad: qty\n      })\n    }).then(recargarCarrito).catch(console.error);\n  };\n  const eliminarItem = id => cambiarCantidad(id, 0);\n  const guardarDireccion = async () => {\n    const {\n      nombre,\n      calle,\n      ciudad,\n      cp\n    } = direccion;\n    if (!nombre || !calle || !ciudad || !cp) {\n      return alert('Completa todos los campos obligatorios.');\n    }\n    try {\n      const res = await fetch(`${API}/direcciones`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          nombre_recibe: direccion.nombre,\n          calle: direccion.calle,\n          ciudad: direccion.ciudad,\n          estado: direccion.estado,\n          cp: direccion.cp,\n          telefono: direccion.telefono,\n          referencia: direccion.referencia\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg);\n      const dirs = await fetch(`${API}/direcciones`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json());\n      setDirecciones(dirs);\n      setSelectedDireccionId(body.id);\n      setNuevaDireccion(false);\n      setMensajeDireccion('📦 Dirección guardada correctamente.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n  const guardarMetodoPago = async () => {\n    if (nuevoMetodo) {\n      if (tipoNuevoMetodo === 'tarjeta') {\n        const {\n          numero,\n          expiracion,\n          cvv\n        } = detallesPago;\n        if (!numero || !expiracion || !cvv) {\n          return alert('Completa los datos de la tarjeta.');\n        }\n      }\n      if (tipoNuevoMetodo === 'transferencia' && !detallesPago.email) {\n        return alert('Introduce tu correo de PayPal.');\n      }\n    } else if (!selectedMetodoId) {\n      return alert('Selecciona o crea un método de pago.');\n    }\n    try {\n      let url = `${API}/metodos`;\n      let method = 'POST';\n      let payload = {\n        tipo: tipoNuevoMetodo\n      };\n      if (nuevoMetodo) {\n        if (tipoNuevoMetodo === 'tarjeta') {\n          payload.token_last4 = detallesPago.numero.slice(-4);\n          payload.titular = detallesPago.numero;\n        } else if (tipoNuevoMetodo === 'transferencia') {\n          payload.titular = detallesPago.email;\n        }\n      } else {\n        url = `${API}/metodos/${selectedMetodoId}`;\n        method = 'PUT';\n        const m = metodos.find(x => x.id === selectedMetodoId);\n        payload.tipo = m.tipo;\n        if (m.tipo === 'transferencia') payload.titular = m.titular;\n      }\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg);\n      const mps = await fetch(`${API}/metodos`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json());\n      setMetodos(mps);\n      setSelectedMetodoId(body.id);\n      setNuevoMetodo(false);\n      setMensajePago('💳 Método guardado correctamente.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // Reemplaza tu antigua borrarMetodo por esto:\n\n  const borrarMetodo = async () => {\n    if (!selectedMetodoId) return;\n    try {\n      const res = await fetch(`${API}/metodos/${selectedMetodoId}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const body = await res.json();\n      if (!res.ok) {\n        // Si viene 400 con msg del backend, lo mostramos\n        return alert(body.msg || 'No se pudo eliminar el método');\n      }\n\n      // Éxito: actualizamos el listado en pantalla\n      setMetodos(metodos.filter(m => m.id !== selectedMetodoId));\n      setSelectedMetodoId(null);\n      setNuevoMetodo(true);\n      setMensajePago('');\n    } catch (e) {\n      console.error(e);\n      alert('Error de red al intentar borrar el método');\n    }\n  };\n  const handleCheckout = async () => {\n    if (!selectedDireccionId) return alert('Guarda tu dirección primero.');\n    if (!selectedMetodoId) return alert('Guarda tu método de pago primero.');\n    try {\n      const res = await fetch(`${API}/carrito/checkout`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          direccionId: selectedDireccionId,\n          metodoId: selectedMetodoId\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg);\n      setMensajeFinal('✅ Compra procesada con éxito.');\n      setCarrito({\n        ...carrito,\n        detalles: []\n      });\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carrito-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 Tu Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), carrito.detalles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"empty\",\n        children: \"Tu carrito est\\xE1 vac\\xEDo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carrito-items\",\n          children: carrito.detalles.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"carrito-item-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:4000${d.producto.imagen_url}`,\n                alt: d.producto.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: d.producto.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"price\",\n                children: [\"$\", d.producto.precio_unitario.toLocaleString(), \" MXN\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cantidad-eliminar\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: `qty-${d.id}`,\n                  children: \"Cantidad:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `qty-${d.id}`,\n                  type: \"number\",\n                  min: \"1\",\n                  value: d.cantidad,\n                  onChange: e => cambiarCantidad(d.id, +e.target.value || 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-eliminar\",\n                  onClick: () => eliminarItem(d.id),\n                  children: \"Eliminar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 19\n            }, this)]\n          }, d.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"direccion-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCE6 Direcci\\xF3n de env\\xEDo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), !nuevaDireccion && /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"direccion-select\",\n            value: selectedDireccionId || '',\n            onChange: e => {\n              if (e.target.value === 'nueva') {\n                setNuevaDireccion(true);\n                setSelectedDireccionId(null);\n              } else {\n                const id = Number(e.target.value);\n                const d = direcciones.find(x => x.id === id);\n                setSelectedDireccionId(id);\n                setDireccion({\n                  nombre: d.nombre_recibe,\n                  calle: d.calle,\n                  ciudad: d.ciudad,\n                  estado: d.estado,\n                  cp: d.cp,\n                  telefono: d.telefono,\n                  referencia: d.referencia || ''\n                });\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona una direcci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this), direcciones.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: d.id,\n              children: [d.calle, \", \", d.ciudad]\n            }, d.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 21\n            }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"nueva\",\n              children: \"+ Agregar nueva\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this), nuevaDireccion && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"direccion-form-grid\",\n            children: ['nombre', 'calle', 'ciudad', 'estado', 'cp', 'telefono', 'referencia'].map(field => /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: field === 'referencia' ? 'Referencia (opc.)' : field.charAt(0).toUpperCase() + field.slice(1),\n              value: direccion[field],\n              onChange: e => setDireccion(d => ({\n                ...d,\n                [field]: e.target.value\n              }))\n            }, field, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guardar-btn\",\n            onClick: guardarDireccion,\n            children: nuevaDireccion ? 'Guardar nueva' : 'Actualizar dirección'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), mensajeDireccion && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeDireccion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"metodo-pago-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCB3 M\\xE9todo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this), !nuevoMetodo ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"metodo-select\",\n              value: selectedMetodoId || '',\n              onChange: e => {\n                if (e.target.value === 'nuevo') {\n                  setNuevoMetodo(true);\n                  setSelectedMetodoId(null);\n                } else {\n                  setSelectedMetodoId(+e.target.value);\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecciona un m\\xE9todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 21\n              }, this), metodos.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: m.id,\n                children: m.tipo === 'tarjeta' ? `Tarjeta ••••${m.token_last4}` : m.tipo === 'transferencia' ? `PayPal (${m.titular})` : 'Efectivo'\n              }, m.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"nuevo\",\n                children: \"+ Agregar nuevo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this), selectedMetodoId && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-eliminar\",\n              onClick: borrarMetodo,\n              children: \"Eliminar m\\xE9todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metodo-form-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"metodo-select\",\n              value: tipoNuevoMetodo,\n              onChange: e => setTipoNuevoMetodo(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"tarjeta\",\n                children: \"Tarjeta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"transferencia\",\n                children: \"PayPal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"efectivo\",\n                children: \"Efectivo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this), tipoNuevoMetodo === 'tarjeta' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"N\\xFAmero de tarjeta\",\n                value: detallesPago.numero,\n                onChange: e => setDetallesPago(d => ({\n                  ...d,\n                  numero: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"MM/AA\",\n                value: detallesPago.expiracion,\n                onChange: e => setDetallesPago(d => ({\n                  ...d,\n                  expiracion: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"CVV\",\n                value: detallesPago.cvv,\n                onChange: e => setDetallesPago(d => ({\n                  ...d,\n                  cvv: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), tipoNuevoMetodo === 'transferencia' && /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Correo PayPal\",\n              value: detallesPago.email,\n              onChange: e => setDetallesPago(d => ({\n                ...d,\n                email: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"guardar-btn\",\n              onClick: guardarMetodoPago,\n              children: \"Guardar m\\xE9todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 17\n          }, this), mensajePago && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajePago\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resumen-carrito\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Total: $\", total.toLocaleString(), \" MXN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pago-btn\",\n            onClick: handleCheckout,\n            children: \"Proceder al pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), mensajeFinal && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeFinal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CarritoPage, \"73yG1rZgIyClBo+Lg9z/eE9bbOM=\");\n_c = CarritoPage;\nvar _c;\n$RefreshReg$(_c, \"CarritoPage\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","CarritoPage","_s","token","localStorage","getItem","API","carrito","setCarrito","direcciones","setDirecciones","selectedDireccionId","setSelectedDireccionId","nuevaDireccion","setNuevaDireccion","direccion","setDireccion","nombre","calle","ciudad","estado","cp","telefono","referencia","mensajeDireccion","setMensajeDireccion","metodos","setMetodos","selectedMetodoId","setSelectedMetodoId","nuevoMetodo","setNuevoMetodo","tipoNuevoMetodo","setTipoNuevoMetodo","detallesPago","setDetallesPago","numero","expiracion","cvv","email","mensajePago","setMensajePago","mensajeFinal","setMensajeFinal","fetch","headers","Authorization","then","r","json","catch","console","error","dirs","length","d","id","nombre_recibe","mps","className","children","fileName","_jsxFileName","lineNumber","columnNumber","total","detalles","reduce","sum","producto","precio_unitario","cantidad","recargarCarrito","cambiarCantidad","qty","method","body","JSON","stringify","eliminarItem","guardarDireccion","alert","res","ok","Error","msg","e","message","guardarMetodoPago","url","payload","tipo","token_last4","slice","titular","m","find","x","borrarMetodo","filter","handleCheckout","direccionId","metodoId","map","src","imagen_url","alt","toLocaleString","htmlFor","type","min","value","onChange","target","onClick","Number","field","placeholder","charAt","toUpperCase","_c","$RefreshReg$"],"sources":["C:/Users/cesar/OneDrive/Documentos/GitHub/muebleria-app/frontend/src/pages/CarritoPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Navbar from '../components/Auth/Navbar';\r\nimport './CarritoPage.css';\r\n\r\nexport default function CarritoPage() {\r\n  const token = localStorage.getItem('token');\r\n  const API   = 'http://localhost:4000/api';\r\n\r\n  // — Carrito\r\n  const [carrito, setCarrito] = useState(null);\r\n\r\n  // — Direcciones\r\n  const [direcciones, setDirecciones]           = useState([]);\r\n  const [selectedDireccionId, setSelectedDireccionId] = useState(null);\r\n  const [nuevaDireccion, setNuevaDireccion]     = useState(false);\r\n  const [direccion, setDireccion]               = useState({\r\n    nombre: '', calle: '', ciudad: '', estado: '', cp: '', telefono: '', referencia: ''\r\n  });\r\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\r\n\r\n  // — Métodos de pago\r\n  const [metodos, setMetodos]                    = useState([]);\r\n  const [selectedMetodoId, setSelectedMetodoId]  = useState(null);\r\n  const [nuevoMetodo, setNuevoMetodo]            = useState(false);\r\n  const [tipoNuevoMetodo, setTipoNuevoMetodo]    = useState('tarjeta');\r\n  const [detallesPago, setDetallesPago]          = useState({\r\n    numero: '', expiracion: '', cvv: '', email: ''\r\n  });\r\n  const [mensajePago, setMensajePago]            = useState('');\r\n\r\n  // — Checkout final\r\n  const [mensajeFinal, setMensajeFinal]          = useState('');\r\n\r\n  useEffect(() => {\r\n    // 1) cargar carrito\r\n    fetch(`${API}/carrito`, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(r => r.json()).then(setCarrito).catch(console.error);\r\n\r\n    // 2) cargar direcciones\r\n    fetch(`${API}/direcciones`, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(r => r.json())\r\n      .then(dirs => {\r\n        setDirecciones(dirs || []);\r\n        if (dirs.length) {\r\n          const d = dirs[0];\r\n          setSelectedDireccionId(d.id);\r\n          setDireccion({\r\n            nombre:    d.nombre_recibe,\r\n            calle:     d.calle,\r\n            ciudad:    d.ciudad,\r\n            estado:    d.estado,\r\n            cp:        d.cp,\r\n            telefono:  d.telefono,\r\n            referencia:d.referencia || ''\r\n          });\r\n        } else {\r\n          setNuevaDireccion(true);\r\n        }\r\n      })\r\n      .catch(console.error);\r\n\r\n    // 3) cargar métodos de pago\r\n    fetch(`${API}/metodos`, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(r => r.json())\r\n      .then(mps => {\r\n        setMetodos(mps || []);\r\n        if (mps.length) {\r\n          setSelectedMetodoId(mps[0].id);\r\n        } else {\r\n          setNuevoMetodo(true);\r\n        }\r\n      })\r\n      .catch(console.error);\r\n  }, [API, token]);\r\n\r\n  if (!carrito) return <p className=\"loading\">Cargando carrito…</p>;\r\n\r\n  const total = carrito.detalles.reduce(\r\n    (sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0\r\n  );\r\n\r\n  const recargarCarrito = () =>\r\n    fetch(`${API}/carrito`, { headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json()).then(setCarrito).catch(console.error);\r\n\r\n  const cambiarCantidad = (id, qty) => {\r\n    fetch(`${API}/carrito/detalle/${id}`, {\r\n      method: 'PUT',\r\n      headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${token}` },\r\n      body: JSON.stringify({ cantidad: qty })\r\n    })\r\n    .then(recargarCarrito)\r\n    .catch(console.error);\r\n  };\r\n  const eliminarItem = id => cambiarCantidad(id, 0);\r\n\r\n  const guardarDireccion = async () => {\r\n    const { nombre, calle, ciudad, cp } = direccion;\r\n    if (!nombre||!calle||!ciudad||!cp) {\r\n      return alert('Completa todos los campos obligatorios.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/direcciones`, {\r\n        method: 'POST',\r\n        headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${token}` },\r\n        body: JSON.stringify({\r\n          nombre_recibe: direccion.nombre,\r\n          calle:         direccion.calle,\r\n          ciudad:        direccion.ciudad,\r\n          estado:        direccion.estado,\r\n          cp:            direccion.cp,\r\n          telefono:      direccion.telefono,\r\n          referencia:    direccion.referencia\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg);\r\n      const dirs = await fetch(`${API}/direcciones`, {\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      }).then(r=>r.json());\r\n      setDirecciones(dirs);\r\n      setSelectedDireccionId(body.id);\r\n      setNuevaDireccion(false);\r\n      setMensajeDireccion('📦 Dirección guardada correctamente.');\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  const guardarMetodoPago = async () => {\r\n    if (nuevoMetodo) {\r\n      if (tipoNuevoMetodo === 'tarjeta') {\r\n        const { numero, expiracion, cvv } = detallesPago;\r\n        if (!numero||!expiracion||!cvv) {\r\n          return alert('Completa los datos de la tarjeta.');\r\n        }\r\n      }\r\n      if (tipoNuevoMetodo === 'transferencia' && !detallesPago.email) {\r\n        return alert('Introduce tu correo de PayPal.');\r\n      }\r\n    } else if (!selectedMetodoId) {\r\n      return alert('Selecciona o crea un método de pago.');\r\n    }\r\n\r\n    try {\r\n      let url    = `${API}/metodos`;\r\n      let method = 'POST';\r\n      let payload = { tipo: tipoNuevoMetodo };\r\n\r\n      if (nuevoMetodo) {\r\n        if (tipoNuevoMetodo === 'tarjeta') {\r\n          payload.token_last4 = detallesPago.numero.slice(-4);\r\n          payload.titular     = detallesPago.numero;\r\n        } else if (tipoNuevoMetodo === 'transferencia') {\r\n          payload.titular     = detallesPago.email;\r\n        }\r\n      } else {\r\n        url    = `${API}/metodos/${selectedMetodoId}`;\r\n        method = 'PUT';\r\n        const m = metodos.find(x => x.id === selectedMetodoId);\r\n        payload.tipo = m.tipo;\r\n        if (m.tipo === 'transferencia') payload.titular = m.titular;\r\n      }\r\n\r\n      const res  = await fetch(url, {\r\n        method,\r\n        headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${token}` },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg);\r\n      const mps  = await fetch(`${API}/metodos`, {\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      }).then(r=>r.json());\r\n      setMetodos(mps);\r\n      setSelectedMetodoId(body.id);\r\n      setNuevoMetodo(false);\r\n      setMensajePago('💳 Método guardado correctamente.');\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  // Reemplaza tu antigua borrarMetodo por esto:\r\n\r\nconst borrarMetodo = async () => {\r\n  if (!selectedMetodoId) return;\r\n  try {\r\n    const res  = await fetch(`${API}/metodos/${selectedMetodoId}`, {\r\n      method: 'DELETE',\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    const body = await res.json();\r\n\r\n    if (!res.ok) {\r\n      // Si viene 400 con msg del backend, lo mostramos\r\n      return alert(body.msg || 'No se pudo eliminar el método');\r\n    }\r\n\r\n    // Éxito: actualizamos el listado en pantalla\r\n    setMetodos(metodos.filter(m => m.id !== selectedMetodoId));\r\n    setSelectedMetodoId(null);\r\n    setNuevoMetodo(true);\r\n    setMensajePago('');\r\n  } catch (e) {\r\n    console.error(e);\r\n    alert('Error de red al intentar borrar el método');\r\n  }\r\n};\r\n\r\n\r\n  const handleCheckout = async () => {\r\n    if (!selectedDireccionId) return alert('Guarda tu dirección primero.');\r\n    if (!selectedMetodoId)   return alert('Guarda tu método de pago primero.');\r\n\r\n    try {\r\n      const res  = await fetch(`${API}/carrito/checkout`, {\r\n        method: 'POST',\r\n        headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${token}` },\r\n        body: JSON.stringify({\r\n          direccionId: selectedDireccionId,\r\n          metodoId:    selectedMetodoId\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg);\r\n      setMensajeFinal('✅ Compra procesada con éxito.');\r\n      setCarrito({ ...carrito, detalles: [] });\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"carrito-container\">\r\n        <h2>🛒 Tu Carrito</h2>\r\n        {carrito.detalles.length === 0 ? (\r\n          <p className=\"empty\">Tu carrito está vacío.</p>\r\n        ) : (\r\n          <>\r\n            {/* Ítems */}\r\n            <div className=\"carrito-items\">\r\n              {carrito.detalles.map(d => (\r\n                <div key={d.id} className=\"carrito-item-card\">\r\n                  <div className=\"item-image\">\r\n                    <img\r\n                      src={`http://localhost:4000${d.producto.imagen_url}`}\r\n                      alt={d.producto.nombre}\r\n                    />\r\n                  </div>\r\n                  <div className=\"item-details\">\r\n                    <h4>{d.producto.nombre}</h4>\r\n                    <p className=\"price\">\r\n                      ${d.producto.precio_unitario.toLocaleString()} MXN\r\n                    </p>\r\n                    <div className=\"cantidad-eliminar\">\r\n                      <label htmlFor={`qty-${d.id}`}>Cantidad:</label>\r\n                      <input\r\n                        id={`qty-${d.id}`}\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        value={d.cantidad}\r\n                        onChange={e => cambiarCantidad(d.id, +e.target.value || 1)}\r\n                      />\r\n                      <button className=\"btn-eliminar\" onClick={() => eliminarItem(d.id)}>\r\n                        Eliminar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Dirección */}\r\n            <section className=\"direccion-section\">\r\n              <h3>📦 Dirección de envío</h3>\r\n              { !nuevaDireccion && (\r\n                <select\r\n                  className=\"direccion-select\"\r\n                  value={selectedDireccionId || ''}\r\n                  onChange={e => {\r\n                    if (e.target.value === 'nueva') {\r\n                      setNuevaDireccion(true);\r\n                      setSelectedDireccionId(null);\r\n                    } else {\r\n                      const id = Number(e.target.value);\r\n                      const d  = direcciones.find(x => x.id === id);\r\n                      setSelectedDireccionId(id);\r\n                      setDireccion({\r\n                        nombre:    d.nombre_recibe,\r\n                        calle:     d.calle,\r\n                        ciudad:    d.ciudad,\r\n                        estado:    d.estado,\r\n                        cp:        d.cp,\r\n                        telefono:  d.telefono,\r\n                        referencia:d.referencia || ''\r\n                      });\r\n                    }\r\n                  }}\r\n                >\r\n                  <option value=\"\">Selecciona una dirección</option>\r\n                  {direcciones.map(d => (\r\n                    <option key={d.id} value={d.id}>\r\n                      {d.calle}, {d.ciudad}\r\n                    </option>\r\n                  ))}\r\n                  <option value=\"nueva\">+ Agregar nueva</option>\r\n                </select>\r\n              )}\r\n              { nuevaDireccion && (\r\n                <div className=\"direccion-form-grid\">\r\n                  {['nombre','calle','ciudad','estado','cp','telefono','referencia'].map(field => (\r\n                    <input\r\n                      key={field}\r\n                      type=\"text\"\r\n                      placeholder={field === 'referencia' ? 'Referencia (opc.)' : field.charAt(0).toUpperCase() + field.slice(1)}\r\n                      value={direccion[field]}\r\n                      onChange={e => setDireccion(d => ({ ...d, [field]: e.target.value }))}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              <button className=\"guardar-btn\" onClick={guardarDireccion}>\r\n                {nuevaDireccion ? 'Guardar nueva' : 'Actualizar dirección'}\r\n              </button>\r\n              {mensajeDireccion && <p className=\"mensaje-confirmacion\">{mensajeDireccion}</p>}\r\n            </section>\r\n\r\n            {/* Método de pago */}\r\n            <section className=\"metodo-pago-section\">\r\n              <h3>💳 Método de pago</h3>\r\n              {!nuevoMetodo ? (\r\n                <>\r\n                  <select\r\n                    className=\"metodo-select\"\r\n                    value={selectedMetodoId||''}\r\n                    onChange={e => {\r\n                      if (e.target.value==='nuevo') {\r\n                        setNuevoMetodo(true);\r\n                        setSelectedMetodoId(null);\r\n                      } else {\r\n                        setSelectedMetodoId(+e.target.value);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Selecciona un método</option>\r\n                    {metodos.map(m => (\r\n                      <option key={m.id} value={m.id}>\r\n                        {m.tipo === 'tarjeta'\r\n                          ? `Tarjeta ••••${m.token_last4}`\r\n                          : m.tipo === 'transferencia'\r\n                            ? `PayPal (${m.titular})`\r\n                            : 'Efectivo'}\r\n                      </option>\r\n                    ))}\r\n                    <option value=\"nuevo\">+ Agregar nuevo</option>\r\n                  </select>\r\n                  {selectedMetodoId && (\r\n                    <button className=\"btn-eliminar\" onClick={borrarMetodo}>\r\n                      Eliminar método\r\n                    </button>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <div className=\"metodo-form-grid\">\r\n                  <select\r\n                    className=\"metodo-select\"\r\n                    value={tipoNuevoMetodo}\r\n                    onChange={e=>setTipoNuevoMetodo(e.target.value)}\r\n                  >\r\n                    <option value=\"tarjeta\">Tarjeta</option>\r\n                    <option value=\"transferencia\">PayPal</option>\r\n                    <option value=\"efectivo\">Efectivo</option>\r\n                  </select>\r\n                  {tipoNuevoMetodo==='tarjeta' && (\r\n                    <>\r\n                      <input\r\n                        type=\"text\" placeholder=\"Número de tarjeta\"\r\n                        value={detallesPago.numero}\r\n                        onChange={e=>setDetallesPago(d=>({...d, numero:e.target.value}))}\r\n                      />\r\n                      <input\r\n                        type=\"text\" placeholder=\"MM/AA\"\r\n                        value={detallesPago.expiracion}\r\n                        onChange={e=>setDetallesPago(d=>({...d, expiracion:e.target.value}))}\r\n                      />\r\n                      <input\r\n                        type=\"text\" placeholder=\"CVV\"\r\n                        value={detallesPago.cvv}\r\n                        onChange={e=>setDetallesPago(d=>({...d, cvv:e.target.value}))}\r\n                      />\r\n                    </>\r\n                  )}\r\n                  {tipoNuevoMetodo==='transferencia' && (\r\n                    <input\r\n                      type=\"email\" placeholder=\"Correo PayPal\"\r\n                      value={detallesPago.email}\r\n                      onChange={e=>setDetallesPago(d=>({...d, email:e.target.value}))}\r\n                    />\r\n                  )}\r\n                  <button className=\"guardar-btn\" onClick={guardarMetodoPago}>\r\n                    Guardar método\r\n                  </button>\r\n                </div>\r\n              )}\r\n              {mensajePago && <p className=\"mensaje-confirmacion\">{mensajePago}</p>}\r\n            </section>\r\n\r\n            {/* Checkout */}\r\n            <div className=\"resumen-carrito\">\r\n              <h3>Total: ${total.toLocaleString()} MXN</h3>\r\n              <button className=\"pago-btn\" onClick={handleCheckout}>\r\n                Proceder al pago\r\n              </button>\r\n              {mensajeFinal && <p className=\"mensaje-confirmacion\">{mensajeFinal}</p>}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}