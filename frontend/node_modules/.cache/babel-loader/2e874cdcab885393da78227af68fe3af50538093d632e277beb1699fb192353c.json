{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cesar\\\\OneDrive\\\\Documentos\\\\GitHub\\\\muebleria-app\\\\frontend\\\\src\\\\pages\\\\CarritoPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/CarritoPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../components/Auth/Navbar';\nimport './CarritoPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CarritoPage() {\n  _s();\n  const [carrito, setCarrito] = useState(null);\n\n  // — DIRECCIONES —\n  const [direcciones, setDirecciones] = useState([]);\n  const [direccion, setDireccion] = useState({\n    nombre: '',\n    calle: '',\n    ciudad: '',\n    estado: '',\n    cp: '',\n    telefono: '',\n    referencia: ''\n  });\n  const [direccionGuardada, setDireccionGuardada] = useState(false);\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\n\n  // — MÉTODOS DE PAGO —\n  const [metodos, setMetodos] = useState([]);\n  const [metodoPago, setMetodoPago] = useState('');\n  const [detallesPago, setDetallesPago] = useState({\n    numero: '',\n    expiracion: '',\n    cvv: '',\n    email: ''\n  });\n  const [pagoGuardado, setPagoGuardado] = useState(false);\n  const [mensajePago, setMensajePago] = useState('');\n\n  // — ESTADO GENERAL —\n  const [mensajeFinal, setMensajeFinal] = useState('');\n  const token = localStorage.getItem('token');\n  const API = 'http://localhost:4000/api';\n  useEffect(() => {\n    // 1) Carrito\n    fetch(`${API}/carrito`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setCarrito).catch(console.error);\n\n    // 2) Direcciones\n    fetch(`${API}/direcciones`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(dirs => {\n      setDirecciones(dirs || []);\n      if (dirs.length) {\n        const d = dirs[0];\n        setDireccion({\n          nombre: d.nombre_recibe,\n          calle: d.calle,\n          ciudad: d.ciudad,\n          estado: d.estado,\n          cp: d.cp,\n          telefono: d.telefono,\n          referencia: d.referencia || ''\n        });\n        setDireccionGuardada(true);\n        setMensajeDireccion('📦 Dirección cargada del servidor.');\n      }\n    }).catch(console.error);\n\n    // 3) Métodos de pago\n    fetch(`${API}/metodos`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(mps => {\n      setMetodos(mps || []);\n      if (mps.length) {\n        const m = mps[0];\n        setMetodoPago(m.id.toString());\n        if (m.tipo === 'tarjeta') {\n          setDetallesPago({\n            numero: m.titular,\n            expiracion: '',\n            cvv: '',\n            email: ''\n          });\n        } else {\n          setDetallesPago({\n            numero: '',\n            expiracion: '',\n            cvv: '',\n            email: m.titular || ''\n          });\n        }\n        setPagoGuardado(true);\n        setMensajePago('💳 Método de pago cargado del servidor.');\n      }\n    }).catch(console.error);\n  }, []);\n  if (!carrito) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando carrito\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 23\n  }, this);\n\n  // — helpers carrito —\n  const cambiarCantidad = (id, qty) => {\n    fetch(`${API}/carrito/detalle/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        cantidad: qty\n      })\n    }).then(() => {\n      fetch(`${API}/carrito`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json()).then(setCarrito);\n    }).catch(console.error);\n  };\n  const eliminarItem = id => cambiarCantidad(id, 0);\n\n  // — total —\n  const total = carrito.detalles.reduce((sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0);\n\n  // — guardar dirección —\n  const guardarDireccion = async () => {\n    if (!direccion.nombre || !direccion.calle || !direccion.ciudad || !direccion.cp) {\n      return alert('Completa nombre, calle, ciudad y código postal.');\n    }\n    try {\n      const res = await fetch(`${API}/direcciones`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          nombre_recibe: direccion.nombre,\n          calle: direccion.calle,\n          ciudad: direccion.ciudad,\n          estado: direccion.estado,\n          cp: direccion.cp,\n          telefono: direccion.telefono,\n          referencia: direccion.referencia\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg);\n      setDirecciones(ds => [...ds, body]);\n      setDireccionGuardada(true);\n      setMensajeDireccion('📦 Dirección guardada en el servidor.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // — guardar / eliminar método de pago —\n  const guardarMetodoPago = async () => {\n    if (!metodoPago) return alert('Selecciona un método.');\n    // si ID numérico → sólo seleccionamos\n    if (!isNaN(+metodoPago)) {\n      setPagoGuardado(true);\n      setMensajePago('💳 Método de pago seleccionado.');\n      return;\n    }\n    // nueva tarjeta\n    const {\n      numero,\n      expiracion,\n      cvv\n    } = detallesPago;\n    if (!numero || !expiracion || !cvv) {\n      return alert('Completa los datos de la tarjeta.');\n    }\n    try {\n      const res = await fetch(`${API}/metodos`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          tipo: 'tarjeta',\n          token_last4: numero.slice(-4),\n          titular: numero\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg);\n      setMetodos(ms => [...ms, body]);\n      setMetodoPago(body.id.toString());\n      setPagoGuardado(true);\n      setMensajePago('💳 Tarjeta guardada en el servidor.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n  const eliminarMetodo = async id => {\n    if (!window.confirm('¿Eliminar este método?')) return;\n    try {\n      const res = await fetch(`${API}/metodos/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error('No se pudo eliminar');\n      setMetodos(ms => ms.filter(m => m.id !== id));\n      // si borraste el seleccionado, resetea select\n      if (metodoPago === id.toString()) {\n        setMetodoPago('');\n        setPagoGuardado(false);\n        setMensajePago('');\n      }\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // — checkout —\n  const manejarPago = async () => {\n    if (!direccionGuardada || !pagoGuardado) {\n      return alert('Guarda dirección y método antes.');\n    }\n    try {\n      var _direcciones$;\n      const res = await fetch(`${API}/carrito/checkout`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          direccionId: (_direcciones$ = direcciones[0]) === null || _direcciones$ === void 0 ? void 0 : _direcciones$.id,\n          metodoPagoId: isNaN(+metodoPago) ? null : +metodoPago\n        })\n      });\n      if (!res.ok) throw new Error('Error en checkout');\n      setMensajeFinal('✅ Compra procesada correctamente.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carrito-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 Tu Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), carrito.detalles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Tu carrito est\\xE1 vac\\xEDo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carrito-items\",\n          children: carrito.detalles.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"carrito-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:4000${d.producto.imagen_url}`,\n              alt: d.producto.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: d.producto.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"$\", d.producto.precio_unitario.toLocaleString(), \" MXN\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cantidad-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Cantidad:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: d.cantidad,\n                  onChange: e => cambiarCantidad(d.id, +e.target.value || 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"eliminar\",\n                onClick: () => eliminarItem(d.id),\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this)]\n          }, d.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"direccion-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCE6 Direcci\\xF3n de env\\xEDo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guardar-btn\",\n            onClick: guardarDireccion,\n            children: \"Guardar direcci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 11\n          }, this), mensajeDireccion && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeDireccion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metodo-pago-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCB3 M\\xE9todo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: metodoPago,\n            onChange: e => {\n              setMetodoPago(e.target.value);\n              setDetallesPago({\n                numero: '',\n                expiracion: '',\n                cvv: '',\n                email: ''\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona un m\\xE9todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"efectivo\",\n              children: \"Efectivo (pago al recibir)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 13\n            }, this), metodos.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: m.id,\n              children: m.tipo === 'tarjeta' ? `Tarjeta •••• ${m.token_last4}` : m.tipo === 'transferencia' ? `PayPal (${m.titular})` : m.tipo\n            }, m.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"nueva_tarjeta\",\n              children: \"+ Agregar nueva tarjeta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 11\n          }, this), metodoPago === 'nueva_tarjeta' && /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), !isNaN(+metodoPago) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"eliminar\",\n            onClick: () => eliminarMetodo(+metodoPago),\n            style: {\n              marginTop: '8px'\n            },\n            children: \"\\uD83D\\uDDD1 Eliminar este m\\xE9todo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"guardar-btn\",\n            onClick: guardarMetodoPago,\n            children: \"Guardar m\\xE9todo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 11\n          }, this), mensajePago && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajePago\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resumen-carrito\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Total: $\", total.toLocaleString(), \" MXN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pago-btn\",\n            onClick: manejarPago,\n            children: \"Proceder al pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 11\n          }, this), mensajeFinal && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeFinal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CarritoPage, \"zBxObAqJ+7wxuse/9y6KIkeUcUs=\");\n_c = CarritoPage;\nvar _c;\n$RefreshReg$(_c, \"CarritoPage\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","CarritoPage","_s","carrito","setCarrito","direcciones","setDirecciones","direccion","setDireccion","nombre","calle","ciudad","estado","cp","telefono","referencia","direccionGuardada","setDireccionGuardada","mensajeDireccion","setMensajeDireccion","metodos","setMetodos","metodoPago","setMetodoPago","detallesPago","setDetallesPago","numero","expiracion","cvv","email","pagoGuardado","setPagoGuardado","mensajePago","setMensajePago","mensajeFinal","setMensajeFinal","token","localStorage","getItem","API","fetch","headers","Authorization","then","r","json","catch","console","error","dirs","length","d","nombre_recibe","mps","m","id","toString","tipo","titular","children","fileName","_jsxFileName","lineNumber","columnNumber","cambiarCantidad","qty","method","body","JSON","stringify","cantidad","eliminarItem","total","detalles","reduce","sum","producto","precio_unitario","guardarDireccion","alert","res","ok","Error","msg","ds","e","message","guardarMetodoPago","isNaN","token_last4","slice","ms","eliminarMetodo","window","confirm","filter","manejarPago","_direcciones$","direccionId","metodoPagoId","className","map","src","imagen_url","alt","toLocaleString","type","min","value","onChange","target","onClick","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/cesar/OneDrive/Documentos/GitHub/muebleria-app/frontend/src/pages/CarritoPage.jsx"],"sourcesContent":["// src/pages/CarritoPage.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport Navbar from '../components/Auth/Navbar';\r\nimport './CarritoPage.css';\r\n\r\nexport default function CarritoPage() {\r\n  const [carrito, setCarrito]             = useState(null);\r\n\r\n  // — DIRECCIONES —\r\n  const [direcciones, setDirecciones]     = useState([]);\r\n  const [direccion, setDireccion]         = useState({\r\n    nombre:'', calle:'', ciudad:'', estado:'', cp:'', telefono:'', referencia:''\r\n  });\r\n  const [direccionGuardada, setDireccionGuardada] = useState(false);\r\n  const [mensajeDireccion, setMensajeDireccion]   = useState('');\r\n\r\n  // — MÉTODOS DE PAGO —\r\n  const [metodos, setMetodos]           = useState([]);\r\n  const [metodoPago, setMetodoPago]     = useState('');\r\n  const [detallesPago, setDetallesPago] = useState({\r\n    numero:'', expiracion:'', cvv:'', email:''\r\n  });\r\n  const [pagoGuardado, setPagoGuardado] = useState(false);\r\n  const [mensajePago, setMensajePago]   = useState('');\r\n\r\n  // — ESTADO GENERAL —\r\n  const [mensajeFinal, setMensajeFinal] = useState('');\r\n  const token = localStorage.getItem('token');\r\n  const API   = 'http://localhost:4000/api';\r\n\r\n  useEffect(() => {\r\n    // 1) Carrito\r\n    fetch(`${API}/carrito`, { headers:{ Authorization:`Bearer ${token}` } })\r\n      .then(r=>r.json()).then(setCarrito).catch(console.error);\r\n\r\n    // 2) Direcciones\r\n    fetch(`${API}/direcciones`, { headers:{ Authorization:`Bearer ${token}` } })\r\n      .then(r=>r.json()).then(dirs=>{\r\n        setDirecciones(dirs||[]);\r\n        if(dirs.length){\r\n          const d=dirs[0];\r\n          setDireccion({\r\n            nombre:d.nombre_recibe, calle:d.calle, ciudad:d.ciudad,\r\n            estado:d.estado, cp:d.cp, telefono:d.telefono,\r\n            referencia:d.referencia||''\r\n          });\r\n          setDireccionGuardada(true);\r\n          setMensajeDireccion('📦 Dirección cargada del servidor.');\r\n        }\r\n      }).catch(console.error);\r\n\r\n    // 3) Métodos de pago\r\n    fetch(`${API}/metodos`, { headers:{ Authorization:`Bearer ${token}` } })\r\n      .then(r=>r.json()).then(mps=>{\r\n        setMetodos(mps||[]);\r\n        if(mps.length){\r\n          const m=mps[0];\r\n          setMetodoPago(m.id.toString());\r\n          if(m.tipo==='tarjeta'){\r\n            setDetallesPago({ numero:m.titular, expiracion:'', cvv:'', email:'' });\r\n          } else {\r\n            setDetallesPago({ numero:'', expiracion:'', cvv:'', email:m.titular||'' });\r\n          }\r\n          setPagoGuardado(true);\r\n          setMensajePago('💳 Método de pago cargado del servidor.');\r\n        }\r\n      }).catch(console.error);\r\n  },[]);\r\n\r\n  if(!carrito) return <p>Cargando carrito…</p>;\r\n\r\n  // — helpers carrito —\r\n  const cambiarCantidad = (id,qty)=>{\r\n    fetch(`${API}/carrito/detalle/${id}`,{\r\n      method:'PUT',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        Authorization:`Bearer ${token}`\r\n      },\r\n      body:JSON.stringify({ cantidad:qty })\r\n    }).then(()=>{\r\n      fetch(`${API}/carrito`,{ headers:{ Authorization:`Bearer ${token}` }})\r\n        .then(r=>r.json()).then(setCarrito);\r\n    }).catch(console.error);\r\n  };\r\n  const eliminarItem = id=>cambiarCantidad(id,0);\r\n\r\n  // — total —\r\n  const total = carrito.detalles.reduce(\r\n    (sum,d)=>(sum + d.producto.precio_unitario * d.cantidad),0\r\n  );\r\n\r\n  // — guardar dirección —\r\n  const guardarDireccion = async ()=>{\r\n    if(!direccion.nombre||!direccion.calle||!direccion.ciudad||!direccion.cp){\r\n      return alert('Completa nombre, calle, ciudad y código postal.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/direcciones`,{\r\n        method:'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          nombre_recibe:direccion.nombre,\r\n          calle:direccion.calle,\r\n          ciudad:direccion.ciudad,\r\n          estado:direccion.estado,\r\n          cp:direccion.cp,\r\n          telefono:direccion.telefono,\r\n          referencia:direccion.referencia\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if(!res.ok) throw new Error(body.msg);\r\n      setDirecciones(ds=>[...ds,body]);\r\n      setDireccionGuardada(true);\r\n      setMensajeDireccion('📦 Dirección guardada en el servidor.');\r\n    } catch(e){\r\n      alert('❌ '+e.message);\r\n    }\r\n  };\r\n\r\n  // — guardar / eliminar método de pago —\r\n  const guardarMetodoPago = async ()=>{\r\n    if(!metodoPago) return alert('Selecciona un método.');\r\n    // si ID numérico → sólo seleccionamos\r\n    if(!isNaN(+metodoPago)){\r\n      setPagoGuardado(true);\r\n      setMensajePago('💳 Método de pago seleccionado.');\r\n      return;\r\n    }\r\n    // nueva tarjeta\r\n    const { numero, expiracion, cvv } = detallesPago;\r\n    if(!numero||!expiracion||!cvv){\r\n      return alert('Completa los datos de la tarjeta.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/metodos`,{\r\n        method:'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          tipo:'tarjeta',\r\n          token_last4:numero.slice(-4),\r\n          titular:numero\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if(!res.ok) throw new Error(body.msg);\r\n      setMetodos(ms=>[...ms,body]);\r\n      setMetodoPago(body.id.toString());\r\n      setPagoGuardado(true);\r\n      setMensajePago('💳 Tarjeta guardada en el servidor.');\r\n    } catch(e){\r\n      alert('❌ '+e.message);\r\n    }\r\n  };\r\n\r\n  const eliminarMetodo = async id=>{\r\n    if(!window.confirm('¿Eliminar este método?'))return;\r\n    try{\r\n      const res = await fetch(`${API}/metodos/${id}`,{\r\n        method:'DELETE',\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      });\r\n      if(!res.ok) throw new Error('No se pudo eliminar');\r\n      setMetodos(ms=>ms.filter(m=>m.id!==id));\r\n      // si borraste el seleccionado, resetea select\r\n      if(metodoPago===id.toString()){\r\n        setMetodoPago('');\r\n        setPagoGuardado(false);\r\n        setMensajePago('');\r\n      }\r\n    }catch(e){\r\n      alert('❌ '+e.message);\r\n    }\r\n  };\r\n\r\n  // — checkout —\r\n  const manejarPago = async ()=>{\r\n    if(!direccionGuardada||!pagoGuardado){\r\n      return alert('Guarda dirección y método antes.');\r\n    }\r\n    try{\r\n      const res = await fetch(`${API}/carrito/checkout`,{\r\n        method:'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          direccionId: direcciones[0]?.id,\r\n          metodoPagoId: isNaN(+metodoPago)?null:+metodoPago\r\n        })\r\n      });\r\n      if(!res.ok) throw new Error('Error en checkout');\r\n      setMensajeFinal('✅ Compra procesada correctamente.');\r\n    }catch(e){\r\n      alert('❌ '+e.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"carrito-container\">\r\n        <h2>🛒 Tu Carrito</h2>\r\n\r\n        {carrito.detalles.length===0\r\n          ? <p>Tu carrito está vacío.</p>\r\n          : <>\r\n        {/* — ítems — */}\r\n        <div className=\"carrito-items\">\r\n          {carrito.detalles.map(d=>(\r\n            <div key={d.id} className=\"carrito-item\">\r\n              <img src={`http://localhost:4000${d.producto.imagen_url}`}\r\n                   alt={d.producto.nombre}/>\r\n              <div className=\"item-info\">\r\n                <h4>{d.producto.nombre}</h4>\r\n                <p>${d.producto.precio_unitario.toLocaleString()} MXN</p>\r\n                <div className=\"cantidad-control\">\r\n                  <label>Cantidad:</label>\r\n                  <input type=\"number\" min=\"1\"\r\n                         value={d.cantidad}\r\n                         onChange={e=>cambiarCantidad(d.id,+e.target.value||1)}/>\r\n                </div>\r\n                <button className=\"eliminar\" onClick={()=>eliminarItem(d.id)}>\r\n                  Eliminar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* — dirección — */}\r\n        <div className=\"direccion-section\">\r\n          <h3>📦 Dirección de envío</h3>\r\n          { /* ... inputs idénticos a arriba ... */ }\r\n          <button className=\"guardar-btn\" onClick={guardarDireccion}>\r\n            Guardar dirección\r\n          </button>\r\n          {mensajeDireccion && <p className=\"mensaje-confirmacion\">{mensajeDireccion}</p>}\r\n        </div>\r\n\r\n        {/* — método de pago — */}\r\n        <div className=\"metodo-pago-section\">\r\n          <h3>💳 Método de pago</h3>\r\n          <select value={metodoPago}\r\n                  onChange={e=>{ setMetodoPago(e.target.value); setDetallesPago({numero:'',expiracion:'',cvv:'',email:''}); }}>\r\n            <option value=\"\">Selecciona un método</option>\r\n            {/* efectivo siempre */}\r\n            <option value=\"efectivo\">Efectivo (pago al recibir)</option>\r\n            {metodos.map(m=>(\r\n              <option key={m.id} value={m.id}>\r\n                {m.tipo==='tarjeta'\r\n                  ? `Tarjeta •••• ${m.token_last4}`\r\n                  : m.tipo==='transferencia'\r\n                    ? `PayPal (${m.titular})`\r\n                    : m.tipo}\r\n              </option>\r\n            ))}\r\n            <option value=\"nueva_tarjeta\">+ Agregar nueva tarjeta</option>\r\n          </select>\r\n\r\n          {metodoPago==='nueva_tarjeta' && (\r\n            <>{/* inputs tarjeta... */}</>\r\n          )}\r\n\r\n          {/* boton eliminar */}\r\n          {!isNaN(+metodoPago) && (\r\n            <button\r\n              className=\"eliminar\"\r\n              onClick={()=>eliminarMetodo(+metodoPago)}\r\n              style={{ marginTop: '8px' }}\r\n            >\r\n              🗑 Eliminar este método\r\n            </button>\r\n          )}\r\n\r\n          <button className=\"guardar-btn\" onClick={guardarMetodoPago}>\r\n            Guardar método de pago\r\n          </button>\r\n          {mensajePago && <p className=\"mensaje-confirmacion\">{mensajePago}</p>}\r\n        </div>\r\n\r\n        {/* — resumen / checkout — */}\r\n        <div className=\"resumen-carrito\">\r\n          <h3>Total: ${total.toLocaleString()} MXN</h3>\r\n          <button className=\"pago-btn\" onClick={manejarPago}>\r\n            Proceder al pago\r\n          </button>\r\n          {mensajeFinal && <p className=\"mensaje-confirmacion\">{mensajeFinal}</p>}\r\n        </div>\r\n        </>}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}