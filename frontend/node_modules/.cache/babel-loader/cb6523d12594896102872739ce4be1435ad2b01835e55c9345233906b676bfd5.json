{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cesar\\\\OneDrive\\\\Documentos\\\\GitHub\\\\muebleria-app\\\\frontend\\\\src\\\\pages\\\\CarritoPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/CarritoPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../components/Auth/Navbar';\nimport './CarritoPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CarritoPage() {\n  _s();\n  const token = localStorage.getItem('token');\n  const API = 'http://localhost:4000/api';\n\n  // — Carrito\n  const [carrito, setCarrito] = useState(null);\n\n  // — Direcciones\n  const [direcciones, setDirecciones] = useState([]);\n  const [selectedDireccionId, setSelectedDireccionId] = useState(null);\n  const [nuevaDireccion, setNuevaDireccion] = useState(false);\n  const [direccion, setDireccion] = useState({\n    nombre: '',\n    calle: '',\n    ciudad: '',\n    estado: '',\n    cp: '',\n    telefono: '',\n    referencia: ''\n  });\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\n\n  // — Métodos de pago\n  const [metodos, setMetodos] = useState([]);\n  const [selectedMetodoId, setSelectedMetodoId] = useState(null);\n  const [nuevoMetodo, setNuevoMetodo] = useState(false);\n  const [tipoNuevoMetodo, setTipoNuevoMetodo] = useState('tarjeta');\n  const [detallesPago, setDetallesPago] = useState({\n    numero: '',\n    expiracion: '',\n    cvv: '',\n    email: ''\n  });\n  const [mensajePago, setMensajePago] = useState('');\n\n  // — Checkout final\n  const [mensajeFinal, setMensajeFinal] = useState('');\n  useEffect(() => {\n    // 1) cargar carrito\n    fetch(`${API}/carrito`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(setCarrito).catch(console.error);\n\n    // 2) cargar direcciones\n    fetch(`${API}/direcciones`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(dirs => {\n      setDirecciones(dirs || []);\n      if (dirs.length) {\n        const d = dirs[0];\n        setSelectedDireccionId(d.id);\n        setDireccion({\n          nombre: d.nombre_recibe,\n          calle: d.calle,\n          ciudad: d.ciudad,\n          estado: d.estado,\n          cp: d.cp,\n          telefono: d.telefono,\n          referencia: d.referencia || ''\n        });\n      } else {\n        setNuevaDireccion(true);\n      }\n    }).catch(console.error);\n\n    // 3) cargar métodos de pago\n    fetch(`${API}/metodos`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(r => r.json()).then(mps => {\n      setMetodos(mps || []);\n      if (mps.length) {\n        const m = mps[0];\n        setSelectedMetodoId(m.id);\n      } else {\n        setNuevoMetodo(true);\n      }\n    }).catch(console.error);\n  }, []);\n  if (!carrito) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando carrito\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 24\n  }, this);\n\n  // — total\n  const total = carrito.detalles.reduce((sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0);\n\n  // — Helpers carrito\n  const recargarCarrito = () => fetch(`${API}/carrito`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  }).then(r => r.json()).then(setCarrito).catch(console.error);\n  const cambiarCantidad = (id, qty) => {\n    fetch(`${API}/carrito/detalle/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        cantidad: qty\n      })\n    }).then(recargarCarrito).catch(console.error);\n  };\n  const eliminarItem = id => cambiarCantidad(id, 0);\n\n  // — guardar dirección\n  const guardarDireccion = async () => {\n    // validación\n    const {\n      nombre,\n      calle,\n      ciudad,\n      cp\n    } = direccion;\n    if (!nombre || !calle || !ciudad || !cp) {\n      return alert('Completa nombre, calle, ciudad y código postal.');\n    }\n    try {\n      const res = await fetch(`${API}/direcciones`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          nombre_recibe: direccion.nombre,\n          calle: direccion.calle,\n          ciudad: direccion.ciudad,\n          estado: direccion.estado,\n          cp: direccion.cp,\n          telefono: direccion.telefono,\n          referencia: direccion.referencia\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg || 'Error guardando dirección');\n      // actualizar lista\n      const dirs = await fetch(`${API}/direcciones`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json());\n      setDirecciones(dirs);\n      setSelectedDireccionId(body.id);\n      setNuevaDireccion(false);\n      setMensajeDireccion('📦 Dirección guardada correctamente.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // — guardar / actualizar método\n  const guardarMetodoPago = async () => {\n    // validaciones\n    if (nuevoMetodo) {\n      if (tipoNuevoMetodo === 'tarjeta') {\n        const {\n          numero,\n          expiracion,\n          cvv\n        } = detallesPago;\n        if (!numero || !expiracion || !cvv) {\n          return alert('Completa los datos de la tarjeta.');\n        }\n      }\n      if (tipoNuevoMetodo === 'transferencia' && !detallesPago.email) {\n        return alert('Introduce tu correo de PayPal.');\n      }\n    } else if (!selectedMetodoId) {\n      return alert('Selecciona o crea un método de pago.');\n    }\n    try {\n      let url = `${API}/metodos`;\n      let method = 'POST';\n      let payload = {\n        tipo: tipoNuevoMetodo\n      };\n      if (nuevoMetodo) {\n        if (tipoNuevoMetodo === 'tarjeta') {\n          payload.token_last4 = detallesPago.numero.slice(-4);\n          payload.titular = detallesPago.numero;\n        } else if (tipoNuevoMetodo === 'transferencia') {\n          payload.titular = detallesPago.email;\n        }\n      } else {\n        // actualizar\n        url = `${API}/metodos/${selectedMetodoId}`;\n        method = 'PUT';\n        const m = metodos.find(x => x.id === selectedMetodoId);\n        payload.tipo = m.tipo;\n        if (m.tipo === 'transferencia') payload.titular = m.titular;\n      }\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg || 'Error guardando método');\n      // refrescar lista\n      const mps = await fetch(`${API}/metodos`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(r => r.json());\n      setMetodos(mps);\n      setSelectedMetodoId(body.id);\n      setNuevoMetodo(false);\n      setMensajePago('💳 Método guardado correctamente.');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // — borrar método\n  const borrarMetodo = async () => {\n    if (!selectedMetodoId) return;\n    try {\n      const res = await fetch(`${API}/metodos/${selectedMetodoId}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error('Error borrando método');\n      const remaining = metodos.filter(m => m.id !== selectedMetodoId);\n      setMetodos(remaining);\n      setSelectedMetodoId(null);\n      setNuevoMetodo(true);\n      setMensajePago('');\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n\n  // — checkout\n  const handleCheckout = async () => {\n    if (!selectedDireccionId) return alert('Guarda tu dirección primero.');\n    if (!selectedMetodoId) return alert('Guarda tu método de pago primero.');\n    try {\n      const res = await fetch(`${API}/carrito/checkout`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          direccionId: selectedDireccionId,\n          metodoId: selectedMetodoId\n        })\n      });\n      const body = await res.json();\n      if (!res.ok) throw new Error(body.msg || 'Error en checkout');\n      setMensajeFinal('✅ Tu compra se ha procesado correctamente.');\n      // recargar carrito cerrado\n      setCarrito({\n        ...carrito,\n        detalles: []\n      });\n    } catch (e) {\n      alert('❌ ' + e.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carrito-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDED2 Tu Carrito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), carrito.detalles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Tu carrito est\\xE1 vac\\xEDo.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"carrito-items\",\n          children: carrito.detalles.map(d => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"carrito-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `http://localhost:4000${d.producto.imagen_url}`,\n              alt: d.producto.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: d.producto.nombre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"$\", d.producto.precio_unitario.toLocaleString(), \" MXN\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cantidad-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Cantidad:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: d.cantidad,\n                  onChange: e => cambiarCantidad(d.id, +e.target.value || 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"eliminar\",\n                onClick: () => eliminarItem(d.id),\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this)]\n          }, d.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"direccion-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"direccion-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              className: \"direccion-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"direccion-icon\",\n                children: \"\\uD83D\\uDCE6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Direcci\\xF3n de env\\xEDo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"direccion-body\",\n              children: [!nuevaDireccion && /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedDireccionId || '',\n                onChange: e => {/* igual que antes */},\n                className: \"direccion-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Selecciona una direcci\\xF3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 23\n                }, this), direcciones.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: d.id,\n                  children: [d.calle, \", \", d.ciudad]\n                }, d.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 25\n                }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"nueva\",\n                  children: \"+ Agregar nueva\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this), nuevaDireccion && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"direccion-form-grid\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Nombre completo\",\n                  value: direccion.nombre,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    nombre: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Calle\",\n                  value: direccion.calle,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    calle: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Ciudad\",\n                  value: direccion.ciudad,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    ciudad: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Estado\",\n                  value: direccion.estado,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    estado: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"C\\xF3digo postal\",\n                  value: direccion.cp,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    cp: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"tel\",\n                  placeholder: \"Tel\\xE9fono\",\n                  value: direccion.telefono,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    telefono: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Referencia (opcional)\",\n                  value: direccion.referencia,\n                  onChange: e => setDireccion({\n                    ...direccion,\n                    referencia: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"guardar-btn\",\n                onClick: guardarDireccion,\n                children: nuevaDireccion ? 'Guardar dirección nueva' : 'Actualizar dirección'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this), mensajeDireccion && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mensaje-confirmacion\",\n                children: mensajeDireccion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metodo-pago-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCB3 M\\xE9todo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), !nuevoMetodo && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedMetodoId || '',\n              onChange: e => {\n                if (e.target.value === 'nuevo') {\n                  setNuevoMetodo(true);\n                  setSelectedMetodoId(null);\n                } else {\n                  setSelectedMetodoId(parseInt(e.target.value, 10));\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Selecciona un m\\xE9todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 21\n              }, this), metodos.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: m.id,\n                children: m.tipo === 'tarjeta' ? `Tarjeta ••••${m.token_last4}` : m.tipo === 'transferencia' ? `PayPal (${m.titular})` : 'Efectivo (al recibir)'\n              }, m.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"nuevo\",\n                children: \"+ Agregar nuevo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 19\n            }, this), selectedMetodoId && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"eliminar\",\n              onClick: borrarMetodo,\n              children: \"Eliminar este m\\xE9todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true), nuevoMetodo && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: tipoNuevoMetodo,\n              onChange: e => setTipoNuevoMetodo(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"tarjeta\",\n                children: \"Tarjeta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"transferencia\",\n                children: \"PayPal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"efectivo\",\n                children: \"Efectivo (al recibir)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, this), tipoNuevoMetodo === 'tarjeta' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"N\\xFAmero de tarjeta\",\n                value: detallesPago.numero,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  numero: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"MM/AA\",\n                value: detallesPago.expiracion,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  expiracion: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"CVV\",\n                value: detallesPago.cvv,\n                onChange: e => setDetallesPago({\n                  ...detallesPago,\n                  cvv: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), tipoNuevoMetodo === 'transferencia' && /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Correo PayPal\",\n              value: detallesPago.email,\n              onChange: e => setDetallesPago({\n                ...detallesPago,\n                email: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 21\n            }, this), tipoNuevoMetodo === 'efectivo' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Pagar\\xE1s al recibir.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"guardar-btn\",\n              onClick: guardarMetodoPago,\n              children: \"Guardar m\\xE9todo nuevo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), mensajePago && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajePago\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resumen-carrito\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Total: $\", total.toLocaleString(), \" MXN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pago-btn\",\n            onClick: handleCheckout,\n            children: \"Proceder al pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this), mensajeFinal && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mensaje-confirmacion\",\n            children: mensajeFinal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CarritoPage, \"73yG1rZgIyClBo+Lg9z/eE9bbOM=\");\n_c = CarritoPage;\nvar _c;\n$RefreshReg$(_c, \"CarritoPage\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","CarritoPage","_s","token","localStorage","getItem","API","carrito","setCarrito","direcciones","setDirecciones","selectedDireccionId","setSelectedDireccionId","nuevaDireccion","setNuevaDireccion","direccion","setDireccion","nombre","calle","ciudad","estado","cp","telefono","referencia","mensajeDireccion","setMensajeDireccion","metodos","setMetodos","selectedMetodoId","setSelectedMetodoId","nuevoMetodo","setNuevoMetodo","tipoNuevoMetodo","setTipoNuevoMetodo","detallesPago","setDetallesPago","numero","expiracion","cvv","email","mensajePago","setMensajePago","mensajeFinal","setMensajeFinal","fetch","headers","Authorization","then","r","json","catch","console","error","dirs","length","d","id","nombre_recibe","mps","m","children","fileName","_jsxFileName","lineNumber","columnNumber","total","detalles","reduce","sum","producto","precio_unitario","cantidad","recargarCarrito","cambiarCantidad","qty","method","body","JSON","stringify","eliminarItem","guardarDireccion","alert","res","ok","Error","msg","e","message","guardarMetodoPago","url","payload","tipo","token_last4","slice","titular","find","x","borrarMetodo","remaining","filter","handleCheckout","direccionId","metodoId","className","map","src","imagen_url","alt","toLocaleString","type","min","value","onChange","target","onClick","placeholder","parseInt","_c","$RefreshReg$"],"sources":["C:/Users/cesar/OneDrive/Documentos/GitHub/muebleria-app/frontend/src/pages/CarritoPage.jsx"],"sourcesContent":["// src/pages/CarritoPage.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport Navbar from '../components/Auth/Navbar';\r\nimport './CarritoPage.css';\r\n\r\nexport default function CarritoPage() {\r\n  const token = localStorage.getItem('token');\r\n  const API   = 'http://localhost:4000/api';\r\n\r\n  // — Carrito\r\n  const [carrito, setCarrito] = useState(null);\r\n\r\n  // — Direcciones\r\n  const [direcciones, setDirecciones]         = useState([]);\r\n  const [selectedDireccionId, setSelectedDireccionId] = useState(null);\r\n  const [nuevaDireccion, setNuevaDireccion]   = useState(false);\r\n  const [direccion, setDireccion]             = useState({\r\n    nombre: '', calle: '', ciudad: '', estado: '', cp: '', telefono: '', referencia: ''\r\n  });\r\n  const [mensajeDireccion, setMensajeDireccion] = useState('');\r\n\r\n  // — Métodos de pago\r\n  const [metodos, setMetodos]                  = useState([]);\r\n  const [selectedMetodoId, setSelectedMetodoId] = useState(null);\r\n  const [nuevoMetodo, setNuevoMetodo]          = useState(false);\r\n  const [tipoNuevoMetodo, setTipoNuevoMetodo]  = useState('tarjeta');\r\n  const [detallesPago, setDetallesPago]        = useState({\r\n    numero: '', expiracion: '', cvv: '', email: ''\r\n  });\r\n  const [mensajePago, setMensajePago]          = useState('');\r\n\r\n  // — Checkout final\r\n  const [mensajeFinal, setMensajeFinal]        = useState('');\r\n\r\n  useEffect(() => {\r\n    // 1) cargar carrito\r\n    fetch(`${API}/carrito`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(r => r.json()).then(setCarrito)\r\n      .catch(console.error);\r\n\r\n    // 2) cargar direcciones\r\n    fetch(`${API}/direcciones`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(r => r.json())\r\n      .then(dirs => {\r\n        setDirecciones(dirs || []);\r\n        if (dirs.length) {\r\n          const d = dirs[0];\r\n          setSelectedDireccionId(d.id);\r\n          setDireccion({\r\n            nombre:    d.nombre_recibe,\r\n            calle:     d.calle,\r\n            ciudad:    d.ciudad,\r\n            estado:    d.estado,\r\n            cp:        d.cp,\r\n            telefono:  d.telefono,\r\n            referencia:d.referencia || ''\r\n          });\r\n        } else {\r\n          setNuevaDireccion(true);\r\n        }\r\n      })\r\n      .catch(console.error);\r\n\r\n    // 3) cargar métodos de pago\r\n    fetch(`${API}/metodos`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(r => r.json())\r\n      .then(mps => {\r\n        setMetodos(mps || []);\r\n        if (mps.length) {\r\n          const m = mps[0];\r\n          setSelectedMetodoId(m.id);\r\n        } else {\r\n          setNuevoMetodo(true);\r\n        }\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  if (!carrito) return <p>Cargando carrito…</p>;\r\n\r\n  // — total\r\n  const total = carrito.detalles.reduce(\r\n    (sum, d) => sum + d.producto.precio_unitario * d.cantidad, 0\r\n  );\r\n\r\n  // — Helpers carrito\r\n  const recargarCarrito = () =>\r\n    fetch(`${API}/carrito`, { headers:{ Authorization:`Bearer ${token}` }})\r\n      .then(r=>r.json()).then(setCarrito).catch(console.error);\r\n\r\n  const cambiarCantidad = (id, qty) => {\r\n    fetch(`${API}/carrito/detalle/${id}`, {\r\n      method: 'PUT',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        Authorization:`Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({ cantidad: qty })\r\n    })\r\n      .then(recargarCarrito)\r\n      .catch(console.error);\r\n  };\r\n  const eliminarItem = id => cambiarCantidad(id, 0);\r\n\r\n  // — guardar dirección\r\n  const guardarDireccion = async () => {\r\n    // validación\r\n    const { nombre, calle, ciudad, cp } = direccion;\r\n    if (!nombre||!calle||!ciudad||!cp) {\r\n      return alert('Completa nombre, calle, ciudad y código postal.');\r\n    }\r\n    try {\r\n      const res = await fetch(`${API}/direcciones`, {\r\n        method: 'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          nombre_recibe: direccion.nombre,\r\n          calle:         direccion.calle,\r\n          ciudad:        direccion.ciudad,\r\n          estado:        direccion.estado,\r\n          cp:            direccion.cp,\r\n          telefono:      direccion.telefono,\r\n          referencia:    direccion.referencia\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg || 'Error guardando dirección');\r\n      // actualizar lista\r\n      const dirs = await fetch(`${API}/direcciones`, {\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      }).then(r=>r.json());\r\n      setDirecciones(dirs);\r\n      setSelectedDireccionId(body.id);\r\n      setNuevaDireccion(false);\r\n      setMensajeDireccion('📦 Dirección guardada correctamente.');\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  // — guardar / actualizar método\r\n  const guardarMetodoPago = async () => {\r\n    // validaciones\r\n    if (nuevoMetodo) {\r\n      if (tipoNuevoMetodo === 'tarjeta') {\r\n        const { numero, expiracion, cvv } = detallesPago;\r\n        if (!numero||!expiracion||!cvv) {\r\n          return alert('Completa los datos de la tarjeta.');\r\n        }\r\n      }\r\n      if (tipoNuevoMetodo === 'transferencia' && !detallesPago.email) {\r\n        return alert('Introduce tu correo de PayPal.');\r\n      }\r\n    } else if (!selectedMetodoId) {\r\n      return alert('Selecciona o crea un método de pago.');\r\n    }\r\n\r\n    try {\r\n      let url    = `${API}/metodos`;\r\n      let method = 'POST';\r\n      let payload = { tipo: tipoNuevoMetodo };\r\n\r\n      if (nuevoMetodo) {\r\n        if (tipoNuevoMetodo === 'tarjeta') {\r\n          payload.token_last4 = detallesPago.numero.slice(-4);\r\n          payload.titular     = detallesPago.numero;\r\n        } else if (tipoNuevoMetodo === 'transferencia') {\r\n          payload.titular     = detallesPago.email;\r\n        }\r\n      } else {\r\n        // actualizar\r\n        url    = `${API}/metodos/${selectedMetodoId}`;\r\n        method = 'PUT';\r\n        const m = metodos.find(x => x.id === selectedMetodoId);\r\n        payload.tipo = m.tipo;\r\n        if (m.tipo === 'transferencia') payload.titular = m.titular;\r\n      }\r\n\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg || 'Error guardando método');\r\n      // refrescar lista\r\n      const mps = await fetch(`${API}/metodos`, {\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      }).then(r=>r.json());\r\n      setMetodos(mps);\r\n      setSelectedMetodoId(body.id);\r\n      setNuevoMetodo(false);\r\n      setMensajePago('💳 Método guardado correctamente.');\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  // — borrar método\r\n  const borrarMetodo = async () => {\r\n    if (!selectedMetodoId) return;\r\n    try {\r\n      const res = await fetch(`${API}/metodos/${selectedMetodoId}`, {\r\n        method: 'DELETE',\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      });\r\n      if (!res.ok) throw new Error('Error borrando método');\r\n      const remaining = metodos.filter(m => m.id !== selectedMetodoId);\r\n      setMetodos(remaining);\r\n      setSelectedMetodoId(null);\r\n      setNuevoMetodo(true);\r\n      setMensajePago('');\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  // — checkout\r\n  const handleCheckout = async () => {\r\n    if (!selectedDireccionId) return alert('Guarda tu dirección primero.');\r\n    if (!selectedMetodoId)   return alert('Guarda tu método de pago primero.');\r\n\r\n    try {\r\n      const res = await fetch(`${API}/carrito/checkout`, {\r\n        method: 'POST',\r\n        headers:{\r\n          'Content-Type':'application/json',\r\n          Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          direccionId: selectedDireccionId,\r\n          metodoId:    selectedMetodoId\r\n        })\r\n      });\r\n      const body = await res.json();\r\n      if (!res.ok) throw new Error(body.msg || 'Error en checkout');\r\n      setMensajeFinal('✅ Tu compra se ha procesado correctamente.');\r\n      // recargar carrito cerrado\r\n      setCarrito({ ...carrito, detalles: [] });\r\n    } catch (e) {\r\n      alert('❌ ' + e.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"carrito-container\">\r\n        <h2>🛒 Tu Carrito</h2>\r\n        {carrito.detalles.length === 0\r\n          ? <p>Tu carrito está vacío.</p>\r\n          : (\r\n          <>\r\n            {/* Items */}\r\n            <div className=\"carrito-items\">\r\n              {carrito.detalles.map(d => (\r\n                <div key={d.id} className=\"carrito-item\">\r\n                  <img\r\n                    src={`http://localhost:4000${d.producto.imagen_url}`}\r\n                    alt={d.producto.nombre}\r\n                  />\r\n                  <div className=\"item-info\">\r\n                    <h4>{d.producto.nombre}</h4>\r\n                    <p>${d.producto.precio_unitario.toLocaleString()} MXN</p>\r\n                    <div className=\"cantidad-control\">\r\n                      <label>Cantidad:</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        value={d.cantidad}\r\n                        onChange={e=>cambiarCantidad(d.id,+e.target.value||1)}\r\n                      />\r\n                    </div>\r\n                    <button className=\"eliminar\" onClick={()=>eliminarItem(d.id)}>\r\n                      Eliminar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n           {/* Dirección */}\r\n            <section className=\"direccion-section\">\r\n              <div className=\"direccion-card\">\r\n                <header className=\"direccion-header\">\r\n                  <span className=\"direccion-icon\">📦</span>\r\n                  <h3>Dirección de envío</h3>\r\n                </header>\r\n                <div className=\"direccion-body\">\r\n                  { !nuevaDireccion && (\r\n                    <select\r\n                      value={selectedDireccionId || ''}\r\n                      onChange={e => { /* igual que antes */ }}\r\n                      className=\"direccion-select\"\r\n                    >\r\n                      <option value=\"\">Selecciona una dirección</option>\r\n                      {direcciones.map(d => (\r\n                        <option key={d.id} value={d.id}>\r\n                          {d.calle}, {d.ciudad}\r\n                        </option>\r\n                      ))}\r\n                      <option value=\"nueva\">+ Agregar nueva</option>\r\n                    </select>\r\n                  )}\r\n\r\n                  { nuevaDireccion && (\r\n                    <div className=\"direccion-form-grid\">\r\n                      <input type=\"text\" placeholder=\"Nombre completo\"      value={direccion.nombre}     onChange={e=>setDireccion({...direccion,nombre:e.target.value})}/>\r\n                      <input type=\"text\" placeholder=\"Calle\"                value={direccion.calle}      onChange={e=>setDireccion({...direccion,calle:e.target.value})}/>\r\n                      <input type=\"text\" placeholder=\"Ciudad\"               value={direccion.ciudad}     onChange={e=>setDireccion({...direccion,ciudad:e.target.value})}/>\r\n                      <input type=\"text\" placeholder=\"Estado\"               value={direccion.estado}     onChange={e=>setDireccion({...direccion,estado:e.target.value})}/>\r\n                      <input type=\"text\" placeholder=\"Código postal\"        value={direccion.cp}         onChange={e=>setDireccion({...direccion,cp:e.target.value})}/>\r\n                      <input type=\"tel\"  placeholder=\"Teléfono\"             value={direccion.telefono}   onChange={e=>setDireccion({...direccion,telefono:e.target.value})}/>\r\n                      <input type=\"text\" placeholder=\"Referencia (opcional)\"value={direccion.referencia} onChange={e=>setDireccion({...direccion,referencia:e.target.value})}/>\r\n                    </div>\r\n                  )}\r\n\r\n                  <button className=\"guardar-btn\" onClick={guardarDireccion}>\r\n                    {nuevaDireccion ? 'Guardar dirección nueva' : 'Actualizar dirección'}\r\n                  </button>\r\n                  {mensajeDireccion && <p className=\"mensaje-confirmacion\">{mensajeDireccion}</p>}\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n\r\n            {/* Método de pago */}\r\n            <div className=\"metodo-pago-section\">\r\n              <h3>💳 Método de pago</h3>\r\n              {!nuevoMetodo && (\r\n                <>\r\n                  <select\r\n                    value={selectedMetodoId||''}\r\n                    onChange={e=>{\r\n                      if(e.target.value==='nuevo'){\r\n                        setNuevoMetodo(true);\r\n                        setSelectedMetodoId(null);\r\n                      } else {\r\n                        setSelectedMetodoId(parseInt(e.target.value,10));\r\n                      }\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Selecciona un método</option>\r\n                    {metodos.map(m=>(\r\n                      <option key={m.id} value={m.id}>\r\n                        {m.tipo==='tarjeta'\r\n                          ? `Tarjeta ••••${m.token_last4}`\r\n                          : m.tipo==='transferencia'\r\n                            ? `PayPal (${m.titular})`\r\n                            : 'Efectivo (al recibir)'}\r\n                      </option>\r\n                    ))}\r\n                    <option value=\"nuevo\">+ Agregar nuevo</option>\r\n                  </select>\r\n                  {selectedMetodoId && (\r\n                    <button className=\"eliminar\" onClick={borrarMetodo}>\r\n                      Eliminar este método\r\n                    </button>\r\n                  )}\r\n                </>\r\n              )}\r\n              {nuevoMetodo && (\r\n                <>\r\n                  <select\r\n                    value={tipoNuevoMetodo}\r\n                    onChange={e=>setTipoNuevoMetodo(e.target.value)}\r\n                  >\r\n                    <option value=\"tarjeta\">Tarjeta</option>\r\n                    <option value=\"transferencia\">PayPal</option>\r\n                    <option value=\"efectivo\">Efectivo (al recibir)</option>\r\n                  </select>\r\n                  {tipoNuevoMetodo==='tarjeta' && (\r\n                    <>\r\n                      <input\r\n                        type=\"text\" placeholder=\"Número de tarjeta\"\r\n                        value={detallesPago.numero}\r\n                        onChange={e=>setDetallesPago({...detallesPago,numero:e.target.value})}\r\n                      />\r\n                      <input\r\n                        type=\"text\" placeholder=\"MM/AA\"\r\n                        value={detallesPago.expiracion}\r\n                        onChange={e=>setDetallesPago({...detallesPago,expiracion:e.target.value})}\r\n                      />\r\n                      <input\r\n                        type=\"text\" placeholder=\"CVV\"\r\n                        value={detallesPago.cvv}\r\n                        onChange={e=>setDetallesPago({...detallesPago,cvv:e.target.value})}\r\n                      />\r\n                    </>\r\n                  )}\r\n                  {tipoNuevoMetodo==='transferencia' && (\r\n                    <input\r\n                      type=\"email\" placeholder=\"Correo PayPal\"\r\n                      value={detallesPago.email}\r\n                      onChange={e=>setDetallesPago({...detallesPago,email:e.target.value})}\r\n                    />\r\n                  )}\r\n                  {tipoNuevoMetodo==='efectivo' && (\r\n                    <p>Pagarás al recibir.</p>\r\n                  )}\r\n                  <button className=\"guardar-btn\" onClick={guardarMetodoPago}>\r\n                    Guardar método nuevo\r\n                  </button>\r\n                </>\r\n              )}\r\n              {mensajePago && <p className=\"mensaje-confirmacion\">{mensajePago}</p>}\r\n            </div>\r\n\r\n            {/* Checkout */}\r\n            <div className=\"resumen-carrito\">\r\n              <h3>Total: ${total.toLocaleString()} MXN</h3>\r\n              <button className=\"pago-btn\" onClick={handleCheckout}>\r\n                Proceder al pago\r\n              </button>\r\n              {mensajeFinal && <p className=\"mensaje-confirmacion\">{mensajeFinal}</p>}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}